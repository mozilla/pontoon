# GraphQL API

Pontoon exposes some of its data via a public API endpoint. The API is
[GraphQL](https://graphql.org/)-based and available at `/graphql/`.

The endpoint has two modes of operation: a JSON one and an HTML one.

## JSON mode

When a request is sent without any headers, with `Accept: application/json` or
if it explicitly contains a `raw` query argument, the endpoint will return JSON
`application/json` responses to GET and POST requests. In case of GET requests,
any whitespace in the query must be escaped.

An example GET requests may look like this:

```bash
$ curl --globoff "https://example.com/graphql/?query={projects{name}}"
```

An example POST requests may look like this:

```bash
$ curl -X POST -d "query={ projects { name } }" https://example.com/graphql/
```

## HTML mode

When a request is sent with `Accept: text/html` such as is the case when
accessing the endpoint in a browser, a GUI query editor and explorer,
[GraphiQL](https://github.com/graphql/graphiql), will be served::

    https://example.com/graphql/?query={projects{name}}

To preview the JSON response in the browser, pass in the `raw` query argument::

    https://example.com/graphql/?query={projects{name}}&raw

## Query IDE

The [GraphiQL](https://github.com/graphql/graphiql) query IDE is available at
`https://example.com/graphql/` when running Pontoon locally and the URL is
accessed with the `Accept: text/html` header, e.g. using a browser.

It offers a query editor with:

- syntax highlighting,
- field and arguments autocomplete,
- real-time error reporting,
- results folding,
- autogenerated docs on shapes and their fields,
- [introspection](https://docs.graphene-python.org/projects/django/en/latest/debug/) via the `_debug`.
