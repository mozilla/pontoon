/*1319750318,169776067*/

if (window.CavalryLogger) { CavalryLogger.start_js(["fbhRl"]); }

function hasArrayNature(a){return (!!a&&(typeof a=='object'||typeof a=='function')&&('length' in a)&&!('setInterval' in a)&&(Object.prototype.toString.call(a)==="[object Array]"||('callee' in a)||('item' in a)));}function $A(b){if(!hasArrayNature(b))return [b];if(b.item){var a=b.length,c=new Array(a);while(a--)c[a]=b[a];return c;}return Array.prototype.slice.call(b);}
function eval_global(c){if('string'!=typeof(c)){throw new Error('JS sent to eval_global is not a string.  Only strings '+'are permitted.');}else if(''==c)return;var d=document.createElement('script');d.type='text/javascript';try{d.appendChild(document.createTextNode(c));}catch(a){d.text=c;}var b=(document.getElementsByTagName("head")[0]||document.documentElement);b.appendChild(d);b.removeChild(d);}
function copy_properties(b,c){b=b||{};c=c||{};for(var a in c)b[a]=c[a];if(c.hasOwnProperty&&c.hasOwnProperty('toString')&&(typeof c.toString!='undefined')&&(b.toString!==c.toString))b.toString=c.toString;return b;}function add_properties(a,b){return copy_properties(window[a]||(window[a]={}),b);}function is_empty(b){if(b instanceof Array){return b.length==0;}else if(b instanceof Object){for(var a in b)return false;return true;}else return !b;}
window.require||(function(){var y={},v={},m=0,x=this,h=1,k=2,i='special',c='exports',b='dependencies',f='module',l='waiting',d='factory',j=undefined,a='define',e='global',g='require';function z(zh){var zj=y[zh],zc,zg;if(zj[l]&&zj[i]&k)p();if(!zj[c]){var ze=zj[c]={},zf=zj[d];if(Object.prototype.toString.call(zf)==='[object Function]'){var zb=[],zd=zj[b],zi=zd.length;if(zj[i]&k)zi=Math.min(zi,zf.length);for(zg=0;zg<zi;zg++){zc=zd[zg];zb.push(zc===f?zj:(zc===c?ze:z(zc)));}var zk=zf.apply(x,zb);if(zk)zj[c]=zk;}else zj[c]=zf;}return zj[c];}function u(ze,zc,zd,zb){if(zc===j){zc=[];zd=ze;ze=r();}else if(zd===j){zd=zc;zc=ze;ze=r();}if(y[ze])return;var zf={id:ze};zf[d]=zd;zf[b]=zc;zf[i]=zb;y[ze]=zf;n(ze);}function w(zb,zc){u(zb,zc,j,h);}function p(){var zc={},zb;for(zb in v)if(y[zb]&&!zc[zb]&&y[zb][i]&k)q({},zb,zc);}function q(ze,zb,zf){zf[zb]=1;var zd=v[zb],zc;if(!zd)return;ze[zb]=1;for(zc in zd){if(!y[zc][i]&k)continue;if(ze[zc]){delete zd[zc];y[zc][l]--;if(!y[zc][l])s(zc);}else q(ze,zc,zf);}ze[zb]=0;}function r(){return '__mod__'+m++;}function n(zd){var ze=y[zd];var zf=0;for(var zc=0;zc<ze[b].length;zc++){var zb=ze[b][zc];if(!y[zb]||y[zb][l]){v[zb]||(v[zb]={});v[zb][zd]=1;zf++;}}ze[l]=zf;if(!zf)s(zd);}function s(zc){var zd=y[zc];if(zd[i]&h)z(zc);var ze=v[zc];if(ze){delete v[zc];for(var zb in ze)if(!--y[zb][l])s(zb);}}function o(zc,zb){y[zc]={id:zc};y[zc][c]=zb;}o(f,0);o(c,0);o(a,u);o(e,x);o(g,z);u.amd={};x[a]=u;x[g]=z;z.ensure=w;var t=[e,f,g,c];var za=false;x.__d=function(ze,zc,zd,zb){u(ze,t.concat(zc),zd,zb||k);if(y[ze][l]&&!za)za=setTimeout(function(){p();za=false;},9);};})();
__d("arbiter",[],function(c,d,e,b){if(!window.async_callback)window.async_callback=function(f,g){return f;};function a(){copy_properties(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});copy_properties(this,a);}copy_properties(a,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',CONTEXT_CHANGE:'ui/context-change',LIST_EDITOR_LISTS_CHANGED:'listeditor/friend_lists_changed',CAROUSEL_ROTATE:'carousel/rotate',subscribe:function(p,g,n){if(!p||p.length==0)return null;p=$A(p);var f=a._getInstance(this);f._listeners.push({callback:g,types:p});var m=f._listeners.length-1;for(var i=0;i<p.length;i++)if(f._index[p[i]]){f._index[p[i]].push(m);}else f._index[p[i]]=[m];n=n||a.SUBSCRIBE_ALL;if(n==a.SUBSCRIBE_ALL){var h,o,l;for(var j=0;j<p.length;j++){o=p[j];if(o in f._events)for(var k=0;k<f._events[o].length;k++){h=f._events[o][k];l=g.apply(null,[o,h]);if(l===false){f._events[o].splice(k,1);k--;}}}}return {subscriberID:m};},unsubscribe:function(j){var f=a._getInstance(this);var h=f._listeners[j.subscriberID];if(!h)return;for(var i=0;i<h.types.length;i++){var k=h.types[i];if(f._index[k])for(var g=0;g<f._index[k].length;g++)if(f._index[k][g]==j.subscriberID){f._index[k].splice(g,1);if(f._index[k].length==0)delete f._index[k];break;}}delete f._listeners[j.subscriberID];},inform:function(o,h,g){var r=hasArrayNature(o);var q=$A(o);var f=a._getInstance(this);var n={};g=g||a.BEHAVIOR_EVENT;for(var j=0;j<q.length;j++){var o=q[j],i=null;if(g==a.BEHAVIOR_PERSISTENT){i=f._events.length;if(!(o in f._events))f._events[o]=[];f._events[o].push(h);f._events[o]._stateful=false;}else if(g==a.BEHAVIOR_STATE){i=0;f._events[o]=[h];f._events[o]._stateful=true;}else if(o in f._events)f._events[o]._stateful=false;window.ArbiterMonitor&&ArbiterMonitor.record('event',o,h,f);var m;if(f._index[o]){var p=$A(f._index[o]);for(var k=0;k<p.length;k++){var l=f._listeners[p[k]];if(l){m=l.callback.apply(null,[o,h]);if(m===false){if(i!==null)f._events[o].splice(i,1);break;}}}}f._updateCallbacks(o,h);window.ArbiterMonitor&&ArbiterMonitor.record('done',o,h,f);n[o]=m;}return r?n:n[q[0]];},query:function(g){var f=a._getInstance(this);if(!(g in f._events))return null;if(f._events[g].length)return f._events[g][0];return null;},_instance:null,_getInstance:function(f){if(f instanceof a)return f;if(!a._instance)a._instance=new a();return a._instance;},registerCallback:function(g,i){var m,h=0,f=a._getInstance(this),l=false;if(typeof g=='function'){m=f._last_id;f._last_id++;l=true;}else{if(!f._callbacks[g])return null;m=g;}if(hasArrayNature(i)){var n={};for(var k=0;k<i.length;k++)n[i[k]]=1;i=n;}for(var o in i){try{if(f.query(o))continue;}catch(j){}h+=i[o];if(f._listen[o]===undefined)f._listen[o]={};f._listen[o][m]=(f._listen[o][m]||0)+i[o];}if(h==0&&l){g();return null;}if(!l){f._callbacks[m].depnum+=h;}else f._callbacks[m]={callback:async_callback(g,'arbiter'),depnum:h};return m;},_updateCallbacks:function(i,h){if(h===null||!this._listen[i])return;for(var g in this._listen[i]){this._listen[i][g]--;if(this._listen[i][g]<=0)delete this._listen[i][g];this._callbacks[g].depnum--;if(this._callbacks[g].depnum<=0){var f=this._callbacks[g].callback;delete this._callbacks[g];f();}}}});c.Arbiter=d.exports=a;},3);
__d("bootloader",["arbiter"],function(t,u,v,s){var a=v('arbiter');var d={};var i=null;var l={};var k={};var f={};var g={};var p=[];var j=null;var m={};var h={};var e=false;var r=[];var c=5000;function n(){var z;var w=[];var za=new Date().getTime();if(za>=i){if(window.send_error_signal)if(Math.random()<.01)send_error_signal('js_timeout_and_exception','00001:error:CSS timeout.');for(z in d)w.push(z);}else for(z in d){var zb=d[z];var zc=window.getComputedStyle?window.getComputedStyle(zb,null):zb.currentStyle;if(zc&&parseInt(zc.height,10)>1)w.push(z);}if(!is_empty(w)){for(var y=0;y<w.length;y++){var x=d[w[y]];x.parentNode.removeChild(x);delete d[w[y]];}i=za+c;b.done(w,true);}return is_empty(d);}function o(y){var w='bootloader_'+y.replace(/[^a-z0-9]/ig,'_');var z=document.createElement('meta');z.id=w;b.getHardpoint().appendChild(z);i=new Date()+c;var za=is_empty(d);d[y]=z;if(za)var x=setInterval(function _poll(){if(n())x&&clearInterval(x);},20,false);}function q(z){if(z in g){var x=g[z],y=x.link;if(y){y.parentNode.removeChild(y);}else{var za=p[x.tagIdx];for(var w=0;w<za.imports.length;w++)if(za.imports[w].href==x.href){za.removeImport(w);break;}}delete g[z];delete l[z];a.inform(a.BOOTLOAD+'/'+z,null,a.BEHAVIOR_STATE);}}var b={configurePage:function(w){var zc={};var zb=b.resolveResources(w);var x;for(x=0;x<zb.length;x++){zc[zb[x].src]=zb[x];b.requested(zb[x].name);o(zb[x].name);}var z=document.getElementsByTagName('link');for(x=0;x<z.length;++x){if(z[x].rel!='stylesheet')continue;for(var y in zc)if(z[x].href.indexOf(y)!==-1){var za=zc[y].name;g[za]={link:z[x]};if(zc[y].permanent)k[za]=true;delete zc[y];break;}}},loadComponents:function(y,w){if(!e){r.push([y,w]);return;}y=$A(y);var zb=[];for(var z=0;z<y.length;++z){if(!y[z])continue;var x=f[y[z]];if(!!x)for(var za=0;za<x.length;++za)zb.push(x[za]);}b.loadResources(zb,w);},loadResources:function(zc,w,zb,zf){var x;zc=b.resolveResources($A(zc));if(zb){var z={};for(x=0;x<zc.length;++x)z[zc[x].name]=true;for(var y in l)if(!(y in k)&&!(y in z)&&!(y in h))q(y);h={};}var zg=[];var za=[];for(x=0;x<zc.length;++x){var zd=zc[x];if(zd.permanent)k[zd.name]=true;var ze=a.BOOTLOAD+'/'+zd.name;if(a.query(ze)!==null)continue;if(!zd.nonblocking)za.push(ze);if(!l[zd.name]){b.requested(zd.name);zg.push(zd);window.CavalryLogger&&CavalryLogger.getInstance().measureResources(zd,zf);}}if(w)w=a.registerCallback(w,za);for(x=0;x<zg.length;++x)b.requestResource(zg[x].type,zg[x].src,zg[x].name);return w;},requestResource:function(zf,zc,za){var x=b.getHardpoint();if(zf=='js'){var zb=document.createElement('script');zb.src=zc;zb.type='text/javascript';zb.async=true;var w=function(){b.done([za]);};zb.onload=zb.onerror=w;zb.onreadystatechange=function(){if(this.readyState in {loaded:1,complete:1})w();};x.appendChild(zb);}else if(zf=='css'){if(document.createStyleSheet){var zd=p,ze=-1;for(var y=0;y<zd.length;y++)if(zd[y].imports.length<25){ze=y;break;}if(ze==-1){zd.push(document.createStyleSheet());ze=zd.length-1;}zd[ze].addImport(zc);g[za]={tagIdx:ze,href:zc};}else{var z=document.createElement('link');z.rel="stylesheet";z.type="text/css";z.media="all";z.href=zc;g[za]={link:z};x.appendChild(z);}o(za);}},done:function(za,x){b.requested(za);if(!x){var z={sender:this};a.inform(a.BOOTLOAD,z,a.BEHAVIOR_EVENT);}for(var w=0;w<za.length;++w){var y=za[w];a.inform(a.BOOTLOAD+'/'+y,true,a.BEHAVIOR_STATE);}},requested:function(x){x=$A(x);for(var w=0;w<x.length;++w)l[x[w]]=true;},enableBootload:function(x){for(var y in x)if(!f[y])f[y]=x[y];if(!e){e=true;for(var w=0;w<r.length;w++)b.loadComponents.apply(null,r[w]);r=[];}},getHardpoint:function(){if(!j){var w=document.getElementsByTagName('head');j=w.length&&w[0]||document.body;}return j;},setResourceMap:function(x){if(!x)return;for(var w in x){if(!x[w].name)x[w].name=w;m[w]=x[w];}},resolveResources:function(z,w){if(!z)return [];var y=new Array(z.length);for(var x=0;x<z.length;++x)if(!z[x].type&&z[x] in m){y[x]=m[z[x]];if(w&&(w in y[x]))y[x]=y[x][w];}else y[x]=z[x];return y;},loadEarlyResources:function(y){var w;b.setResourceMap(y);var x=[];for(w in y)x.push(m[w]);b.loadResources(x);for(w in y){var z=m[w];if(!z.permanent)h[z.name]=z;}},isDisplayJS:function(w){if(typeof w=='string')w=m[w];return w.displayjs;}};t.Bootloader=u.exports=b;},3);
(function(){if(window!=window.top)return;var o='_e_',q=(window.name||'').toString();q=(q.length==7&&o==q.substr(0,3))?q.substr(3):(window.name=o+window._EagleEyeSeed).substr(3);var m=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'';var k=o+q+'_',g=new Date(+new Date()+604800000).toGMTString(),e=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1'),f='; expires='+g+';path=/; domain='+e+m,d=0,r=false,l,p=window._EagleEyeSessionStorage&&window.sessionStorage,i=document.cookie.length,j=false,n=+new Date();function h(v){var s=2166136261;for(var t=0,u=v.length;t<u;++t)s=(s^v.charCodeAt(t))*16777619;s+=s<<13;s^=s>>7;s+=s<<3;s^=s>>17;s+=s<<5;return (s|0)+2147483648;}function c(s){return k+(d++)+'='+encodeURIComponent(s)+f;}function a(){var s=[],v=false,u=0,t=0;this.isEmpty=function(){return !s.length;};this.enqueue=function(x,w){if(w){s.unshift(x);}else s.push(x);};this.dequeue=function(){s.shift();};this.peek=function(){return s[0];};this.clear=function(y){i=Math.min(i,document.cookie.length);if(!j&&(new Date()-n>60000))j=true;var w=!y&&(document.cookie.search(o)>=0);var zi=!!(window.Env&&Env.cookie_header_limit);var zd=(window.Env&&Env.cookie_count_limit)||19;var ze=(window.Env&&Env.cookie_header_limit)||3950;var zb=zd-5;var zc=ze-1000;while(!this.isEmpty()){var x=c(this.peek());if(zi&&(x.length>ze||(j&&x.length+i>ze))){this.dequeue();continue;}if((w||zi)&&((document.cookie.length+x.length>ze)||(document.cookie.split(';').length>zd)))break;document.cookie=x;w=true;this.dequeue();}var zf=+new Date();if(y||!v&&w&&((t>0)&&(Math.min(10*Math.pow(2,t-1),60000)+u<zf))&&(r||window.Arbiter&&window.OnloadEvent&&Arbiter.query(OnloadEvent.ONLOAD))&&(!this.isEmpty()||(document.cookie.length>zc)||(document.cookie.split(';').length>zb))){var zh=new Image(),zg=this,z=window._EagleEyeDomain||(window.Env&&Env.tracking_domain)||'';v=true;zh.onload=function _EagleEye_logged(){v=false;t=0;zg.clear();};zh.onerror=zh.onabort=function _EagleEye_error(){v=false;u=+new Date();t++;};var za=(window.Env&&Env.fb_isb)?'&fb_isb='+Env.fb_isb:'';var zj=window.Env?'&__user='+Env.user:'';zh.src=z+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+za+zj+'&'+(!y?'':'s=')+zf;}};}l=new a();if(p){var b=function(){var u=0;var w=u;function t(){var y=sessionStorage.getItem('_e_ids');if(y){var x=(y+'').split(';');if(x.length==2){u=parseInt(x[0],10);w=parseInt(x[1],10);}}}function v(){var x=u+';'+w;sessionStorage.setItem('_e_ids',x);}function s(x){return '_e_'+((x!==undefined)?x:u++);}this.isEmpty=function(){return w===u;};this.enqueue=function(z,x){var y=x?s(--w):s();sessionStorage.setItem(y,z);v();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(s(w));w++;v();};this.peek=function(){var x=sessionStorage.getItem(s(w));return x?(x+''):x;};this.clear=l.clear;t();};l=new b();}window.EagleEye={log:function(v,s,t){if(window.Env&&Env.no_cookies)return;var w=[q,+new Date(),v].concat(s);w.push(w.length);function u(){var y=JSON.stringify(w);try{l.enqueue(y,!!t);l.clear(!!t);}catch(x){if(p&&(x.code===1000)){l=new a();p=false;u();}}}if(window.JSON){u();}else if(window.Bootloader)Bootloader.loadComponents('json',u);},createLogger:function(u,s){s=(s===undefined)?1:s;var t=function(v,w){if(t.enabled)EagleEye.log(u,v,w);};t.enabled=false;t._key=((window.Env&&Env.user)||Math.random())+u;t.enabled=(h(t._key)%65535/65535)<=s;return t;},getSessionID:function(){return q;},loaded:function(){r=true;}};})();
void(1);window.__DEV__=window.__DEV__||0;if(!window.skipDomainLower&&navigator&&navigator.userAgent&&document.domain.toLowerCase().match(/(^|\.)facebook\..*/)&&!(parseInt((/Gecko\/([0-9]+)/.exec(navigator.userAgent)||[]).pop(),10)<=20060508))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');window.onloadhooks=window.onloadhooks||[];window.onloadRegister=window.onloadRegister||function(a){onloadhooks.push(a);};window.onafterloadhooks=window.onafterloadhooks||[];window.onafterloadRegister=window.onafterloadRegister||function(a){onafterloadhooks.push(a);};function run_if_loaded(a,b){return window.loaded&&b.call(a);}function run_with(b,a,c){Bootloader.loadComponents(a,bind(b,c));return false;}function wait_for_load(c,b,e){e=bind(c,e,b);if(window.loaded)return e();switch((b||event).type){case 'load':case 'focus':onafterloadRegister(e);return;case 'click':var d=c.style,a=document.body.style;d.cursor=a.cursor='progress';onafterloadRegister(function(){d.cursor=a.cursor='';if(c.tagName.toLowerCase()=='a'){if(false!==e()&&c.href)window.location.href=c.href;}else if(c.click)c.click();});break;}return false;}function bind(d,c){var a=Array.prototype.slice.call(arguments,2);function b(){var f=d||(this==window?false:this),e=a.concat(Array.prototype.slice.call(arguments));if(typeof(c)=="string"){if(f[c])return f[c].apply(f,e);}else return c.apply(f,e);}return b;}var curry=bind(null,bind,null);function env_get(a){return window.Env&&Env[a];}document.documentElement.className=document.documentElement.className.replace('no_js','');
var Mixins={Arbiter:{_getArbiterInstance:function(){return this._arbiter||(this._arbiter=new Arbiter());},inform:function(c,b,a){return this._getArbiterInstance().inform(c,b,a);},subscribe:function(c,a,b){return this._getArbiterInstance().subscribe(c,a,b);},unsubscribe:function(a){this._getArbiterInstance().unsubscribe(a);}}};
Class={extend:function(a,b){if(!Metaprototype._arbiterHandle)Metaprototype._arbiterHandle=Arbiter.subscribe(Arbiter.BOOTLOAD,Metaprototype._onbootload.bind(Metaprototype));Metaprototype._queue(a,b);},mixin:function(c,b){var a=Array.prototype.slice.call(arguments);a[0]=a[0].prototype;Function.mixin.apply(Function,a);}};function Metaprototype(){}copy_properties(Metaprototype,{makeFinal:function(a){},_pending:{},_queue:function(b,c){b.__class_extending=true;var a=Arbiter.registerCallback(bind(Metaprototype,Metaprototype._apply,b,c),[Arbiter.FUNCTION_EXTENSION+'/'+c,Arbiter.BOOTLOAD]);if(a!==null)this._pending[c]=true;},_onbootload:function(b,a){this._update();},_update:function(){for(var a in this._pending)if(!!window[a]){delete this._pending[a];if(!window[a].__class_extending){Arbiter.inform(Arbiter.FUNCTION_EXTENSION+'/'+a,true,Arbiter.BEHAVIOR_STATE);}else window[a].__class_name=a;}},_apply:function(a,c){delete a.__class_extending;var d=__metaprototype(window[c],0);var b=__metaprototype(a,d.prototype.__level+1);b.parent=d;if(!!a.__class_name)Arbiter.inform(Arbiter.FUNCTION_EXTENSION+'/'+a.__class_name,true,Arbiter.BEHAVIOR_STATE);}});function __metaprototype(c,a){if(c.__metaprototype)return c.__metaprototype;var b=new Function();b.construct=__metaprototype_construct;b.prototype.construct=__metaprototype_wrap(c,a,true);b.prototype.__level=a;b.base=c;c.prototype.parent=b;c.__metaprototype=b;return b;}function __metaprototype_construct(a){__metaprototype_init(a.parent);var d=[];var c=a;while(c.parent){var b=new c.parent();d.push(b);b.__instance=a;c=c.parent;}a.parent=d[1];d.reverse();d.pop();a.__parents=d;a.__instance=a;return a.parent.construct.apply(a.parent,arguments);}function __metaprototype_init(d){if(d.initialized)return;var a=d.base.prototype;if(d.parent){__metaprototype_init(d.parent);var e=d.parent.prototype;for(var b in e)if(b!='__level'&&b!='construct'&&a[b]===undefined)a[b]=d.prototype[b]=e[b];}d.initialized=true;var c=d.prototype.__level;for(var b in a)if(b!='parent')a[b]=d.prototype[b]=__metaprototype_wrap(a[b],c);}function __metaprototype_wrap(c,b,d){if(typeof c!='function'||c.__prototyped)return c;var a=function(){var g=this.__instance;if(g){var h=g.parent;g.parent=b?g.__parents[b-1]:null;var e=arguments;if(d){e=[];for(var f=1;f<arguments.length;f++)e.push(arguments[f]);}var i=c.apply(g,e);g.parent=h;return i;}else return c.apply(this,arguments);};a.__prototyped=true;return a;}Function.mixin=function(){for(var b=1,a=arguments.length;b<a;++b)copy_properties(arguments[0],Mixins[arguments[b]]||arguments[b]);};Function.prototype.bind=function(b){var a=[b,this].concat(Array.prototype.slice.call(arguments,1));return bind.apply(null,a);};Function.prototype.curry=Function.prototype.bind.bind(null,null);Function.prototype.shield=function(b){if(typeof this!='function')throw new TypeException();var a=this.bind.apply(this,$A(arguments));return function(){return a();};};Function.prototype.defer=function(b,a){if(typeof this!='function')throw new TypeError();b=b||0;return setTimeout(this,b,a);};function bagofholding(){}function bagof(a){return function(){return a;};}
function set_ue_cookie(a){if(!(window.Env&&Env.no_cookies))document.cookie="act="+encodeURIComponent(a)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}window.UserNoOp=window.UserNoOp||(function(){var a=function(){};var b=function(){return this;};copy_properties(a.prototype,{add_event:b,add_data:b,set_ua_id:b,set_namespace:b});return a;})();window.UserAction=window.UserAction||(function(){var a=function a(e,d,b){var c=e+'/'+d;copy_properties(this,{ue:c,_ua_id:null,_ts:e,_ns:null,_start_ts:e,_prev_event:'s',_ue_ts:e,_ue_count:d,_context:b,_version:2});};a.enable=function(b){a.enable[b]=true;};a._stack=[];copy_properties(a.prototype,{set_ua_id:function(b){this._ua_id=b;return this;},set_namespace:function(b){this._ns=b;return this;},add_event:function(d){if(!a.enable.events)return this;var f=(+new Date()),b=f-this._ts;var e=f-this._ue_ts;var c=[this._version,this.ue,this._ns,this._ua_id,this._prev_event,d,b,e];window.EagleEye&&EagleEye.log('evt',c);this._ts=f;this._prev_event=d;return this;},add_data:function(b){if(!a.enable.data)return this;return this;}});return a;})();window.user_action=window.user_action||(function(){var d=0,c=0;var b=null,a=null;return function(e,i,event,h,f){var l=(+new Date()),k=l+'/'+d;f=f||{};if(!i&&event)i=event.getTarget();var g=50;if(l-c<g&&i==b&&h!="FORCE")return UserAction._stack[UserAction._stack.length-1];b=i;a=event;var j=new UserAction(l,d,e);UserAction._stack.push(j);while(UserAction._stack.length>10)UserAction._stack.shift();Arbiter.inform("UserAction/new",{ua:j,node:i,mode:h,event:event,extra_data:f});c=l;d++;return j;};})();window.report_data=function(a,b){user_action(a,null,null,'FORCE',b);};
(function(){ClickRef={};ClickRef.get_intern_ref=function(c){if(!!c){var b={profile_minifeed:1,info_tab:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var a=c;a&&a!=document.body;a=a.parentNode){if(!a.id||typeof a.id!=='string')continue;if(a.id.substr(0,8)=='pagelet_')return a.id.substr(8);if(a.id.substr(0,8)=='box_app_')return a.id;if(b[a.id])return a.id;}}return '-';};ClickRef.get_href=function(b){var a=(b.getAttribute&&(b.getAttribute('ajaxify')||b.getAttribute('data-endpoint'))||b.action||b.href||b.name);return a;};ClickRef.mouse_click_info=function(b){if(!ge('content'))return [0,0,0,0];var a=$('content');var c=window.Vector2?Vector2.getEventPosition(b):{x:0,y:0};return [c.x,c.y,a.offsetLeft,a.clientWidth];};ClickRef.should_report=function(b,a){if(a=='FORCE')return true;if(a=='INDIRECT')return false;return (b&&ClickRef.get_href(b));};ClickRef.collect_data=function(l,h,event,d){var j=(!window.ArbiterMonitor)?'r':'a',g=[0,0,0,0],k,e,f;if(!!event){k=event.type;if(k=='click'&&ge('content'))g=ClickRef.mouse_click_info(event);var b=0;event.ctrlKey&&(b+=1);event.shiftKey&&(b+=2);event.altKey&&(b+=4);event.metaKey&&(b+=8);if(b)k+=b;}if(!!h)e=ClickRef.get_href(h);var a=[];if(window.ArbiterMonitor){f=ArbiterMonitor.getInternRef(h);a=ArbiterMonitor.getActFields();}var c={};if(window.collect_data_attribs){c=collect_data_attribs(h,['ft','gt']);copy_properties(c.ft,d.ft||{});copy_properties(c.gt,d.gt||{});if(c.gt.ua_id)l.set_ua_id(c.gt.ua_id);}var i=[l._ue_ts,l._ue_count,e||'-',l._context,k||'-',f||ClickRef.get_intern_ref(h),j,window.URI?URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,c].concat(g).concat(a);return i;};ClickRef.onNewUserAction=function(b,a){Bootloader.loadComponents('dom-collect',function(){if(ClickRef.should_report(a.node,a.mode)){var c=ClickRef.collect_data(a.ua,a.node,a.event,a.extra_data);ClickRef.report(a.ua,c);}});};ClickRef.report=function(b,a){var c=b.ue;set_ue_cookie(c);window.EagleEye&&EagleEye.log('act',a);};window.Arbiter&&Arbiter.subscribe("UserAction/new",ClickRef.onNewUserAction);})();
__d("dom-core",[],function(d,e,f,b){var a=function(g){return typeof g=='string'?document.getElementById(g):g;};var c=a;d.ge=b.ge=c;d.$=b.$=a;},3);
__d("css-core",["dom-core"],function(d,e,f,c){var a=f('dom-core').$;var b={hasClass:function(h,g){h=a(h);return (' '+h.className+' ').indexOf(' '+g+' ')>-1;},addClass:function(h,g){h=a(h);if(g&&!b.hasClass(h,g))h.className=h.className+' '+g;return h;},removeClass:function(h,g){h=a(h);if(b.hasClass(h,g))h.className=h.className.replace(new RegExp('(^|\\s)'+g+'(?:\\s|$)','g'),'$1');return h;},toggleClass:function(h,g){return b.conditionClass(h,g,!b.hasClass(h,g));},conditionClass:function(i,h,g){return (g?b.addClass:b.removeClass)(i,h);},show:function(g){b.removeClass(g,'hidden_elem');},hide:function(g){b.addClass(g,'hidden_elem');},conditionShow:function(h,g){b.conditionClass(h,'hidden_elem',!g);}};d.CSS=e.exports=b;},3);
__d("parent",["css-core"],function(b,c,d,a){b.Parent=c.exports={byTag:function(e,f){f=f.toUpperCase();while(e&&e.nodeName!=f)e=e.parentNode;return e;},byClass:function(f,e){while(f&&!d('css-core').hasClass(f,e))f=f.parentNode;return f;},byAttribute:function(f,e){while(f&&(!f.getAttribute||!f.getAttribute(e)))f=f.parentNode;return f;}};},3);
function trackReferrer(a,e){a=Parent.byAttribute(a,'data-referrer');if(a){var d=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(e)[1]||'';if(!d)return;var c=d+'|'+a.getAttribute('data-referrer');var b=new Date();b.setTime(new Date().getTime()+1000);document.cookie="x-src="+encodeURIComponent(c)+"; "+"expires="+b.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return a;}
!function(){if(window.__primer)return;window.__primer=true;var a=null;var b=/async(?:-post)?|dialog(?:-pipe|-post)?|theater|toggle/;document.documentElement.onclick=function(e){e=e||window.event;a=e.target||e.srcElement;var f=Parent.byTag(a,'A');if(!f)return;var c=f.getAttribute('ajaxify');var g=f.href;var l=c||g;if(l){var k=user_action('a',f,e);if(window.ArbiterMonitor)ArbiterMonitor.initUA(k,[f]);}if(c&&g&&!(/#$/).test(g)){var h=e.which&&e.which!=1;var i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(h||i)return;}trackReferrer(f,l);var d=['dialog'];var j=f.rel&&f.rel.match(b);j=j&&j[0];switch(j){case 'dialog-pipe':d.push('ajaxpipe');case 'dialog':case 'dialog-post':Bootloader.loadComponents(d,function(){Dialog.bootstrap(l,null,j=='dialog',null,null,f);});break;case 'async':case 'async-post':Bootloader.loadComponents('async',function(){AsyncRequest.bootstrap(l,f);});break;case 'theater':Bootloader.loadComponents('PhotoSnowbox',function(){PhotoSnowbox.bootstrap(l,f);});break;case 'toggle':CSS.toggleClass(f.parentNode,'openToggler');Bootloader.loadComponents('Toggler',function(){Toggler.bootstrap(f);});break;default:return;}return false;};document.documentElement.onsubmit=function(c){c=c||window.event;var d=c.target||c.srcElement;if(d&&d.nodeName=='FORM'&&d.getAttribute('rel')=='async'){var f=user_action('f',d,c);if(window.ArbiterMonitor)ArbiterMonitor.initUA(f,[d]);var e=a;Bootloader.loadComponents('dom-form',function(){Form.bootstrap(d,e);});return false;}};}();
DataStore=window.DataStore||{_storage:{},_elements:{},_tokenCounter:1,_NOT_IN_DOM_CONST:1,_getStorage:function(a){var b;if(typeof a=='string'){b='str_'+a;}else{b='elem_'+(a.__FB_TOKEN||(a.__FB_TOKEN=[DataStore._tokenCounter++]))[0];DataStore._elements[b]=a;}return DataStore._storage[b]||(DataStore._storage[b]={});},_shouldDeleteData:function(a){if(!a.nodeName)return false;try{if(null!=a.offsetParent)return false;}catch(b){}if(document.documentElement.contains){return !document.documentElement.contains(a);}else return (document.documentElement.compareDocumentPosition(a)&DataStore._NOT_IN_DOM_CONST);},set:function(c,b,d){var a=DataStore._getStorage(c);a[b]=d;return c;},get:function(e,d,c){var b=DataStore._getStorage(e),f=b[d];if(typeof f==='undefined'&&e.getAttribute){var a=e.getAttribute('data-'+d);f=(null===a)?undefined:a;}if((c!==undefined)&&(f===undefined))f=b[d]=c;return f;},remove:function(c,b){var a=DataStore._getStorage(c),d=a[b];delete a[b];return d;},cleanup:function(){var b,a;for(b in DataStore._elements){a=DataStore._elements[b];if(DataStore._shouldDeleteData(a)){delete DataStore._storage[b];delete DataStore._elements[b];}}}};
function object(b){var a=new Function();a.prototype=b;return new a();}function is_scalar(a){return (/string|number|boolean/).test(typeof a);}function keys(c){var b=[];for(var a in c)b.push(a);return b;}function values(b){var c=[];for(var a in b)c.push(b[a]);return c;}function count(c){var a=0;for(var b in c)a++;return a;}function are_equal(a,b){return JSON.stringify(a)==JSON.stringify(b);}function merge(){var b={};for(var a=0;a<arguments.length;a++)copy_properties(b,arguments[a]);return b;}Object.from=function(c,e){var d={};var b=hasArrayNature(e);if(typeof e=='undefined')e=true;for(var a=c.length;a--;)d[c[a]]=b?e[a]:e;return d;};function coalesce(){for(var a=0;a<arguments.length;++a)if(arguments[a]!=null)return arguments[a];return null;}
__d("dom-html",[],function(c,d,e,b){function a(f){if(f&&f.__html)f=f.__html;if(!(this instanceof a)){if(f instanceof a)return f;return new a(f);}this._content=f;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._ie_clone_bug=false;return this;}a.isHTML=function(f){return f&&(f instanceof a||f.__html!==undefined);};a.replaceJSONWrapper=function(f){return f&&f.__html!==undefined?new a(f.__html):f;};copy_properties(a.prototype,{toString:function(){var f=this._content||'';if(this._extra_action)f+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return f;},setAction:function(f){this._extra_action=f;return this;},getAction:function(){this._fillCache();var f=function(){this._inline_js();eval_global(this._extra_action);}.bind(this);if(this.getDeferred()){return f.defer.bind(f);}else return f;},setDeferred:function(f){this._defer=!!f;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){return this.getNodes()[0];},ieCloneBug:function(){this._fillCache();return this._ie_clone_bug;},_fillCache:function(){if(null!==this._nodes)return;var i=this._content;if(!i){this._nodes=[];return;}i=i.replace(/(<(\w+)[^>]*?)\/>/g,function(q,r,s){return s.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?q:r+'></'+s+'>';});var m=i.trim().toLowerCase(),p=document.createElement('div'),g=false;var o=(!m.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!m.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(m.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!m.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!m.indexOf('<td')||!m.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!m.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===o){p.className='__WRAPPER';if(ua.ie()){o=[0,'<span style="display:none">&nbsp;</span>',''];g=true;}else o=[0,'',''];}p.innerHTML=o[1]+i+o[2];while(o[0]--)p=p.lastChild;if(g)p.removeChild(p.firstChild);p.className!='__WRAPPER';if(0!==p.getElementsByTagName('option').length||0!==p.getElementsByTagName('object').length)this._ie_clone_bug=true;if(ua.ie()){var n;if(!m.indexOf('<table')&&-1==m.indexOf('<tbody')){n=p.firstChild&&p.firstChild.childNodes;}else if(o[1]=='<table>'&&-1==m.indexOf('<tbody')){n=p.childNodes;}else n=[];for(var k=n.length-1;k>=0;--k)if(n[k].nodeName&&n[k].nodeName.toLowerCase()=='tbody'&&n[k].childNodes.length==0)n[k].parentNode.removeChild(n[k]);}var l=p.getElementsByTagName('script');var f=[];for(var j=0;j<l.length;j++)if(l[j].src){f.push(Bootloader.requestResource.bind(Bootloader,'js',l[j].src));}else f.push(eval_global.bind(null,l[j].innerHTML));for(var j=l.length-1;j>=0;j--)l[j].parentNode.removeChild(l[j]);var h=function(){for(var q=0;q<f.length;q++)f[q]();};this._nodes=$A(p.childNodes);this._inline_js=h;}});c.HTML=d.exports=a;},3);
__d("dom",["dom-core","css-core","dom-html"],function(h,i,j,f){var a=j('dom-core').$;var g=j('dom-core').ge;var c=j('css-core');var e=j('dom-html');var d={find:function(k,m){var l=d.scry(k,m);return l[0];},scry:function(t,zf){if(!t)return [];var zg=zf.split(' ');var n=[t];var s=t===document;for(var w=0;w<zg.length;w++){if(n.length==0)break;if(zg[w]=='')continue;var ze=zg[w];var zc=[];var zn=false;if(ze.charAt(0)=='^')if(w==0){zn=true;ze=ze.slice(1);}else return [];ze=ze.replace(/\./g,' .');ze=ze.replace(/\#/g,' #');ze=ze.replace(/\[/g,' [');var zj=ze.split(' ');var zk=zj[0]||'*';var x=zj[1]&&zj[1].charAt(0)=='#';if(x){var r=g(zj[1].slice(1),true);if(r&&('*'==zk||r.tagName.toLowerCase()==zk))for(var za=0;za<n.length;za++)if(zn&&d.contains(r,n[za])){zc=[r];break;}else if(document==n[za]||d.contains(n[za],r)){zc=[r];break;}}else{var zm=[];var m=n.length;for(var y=0;y<m;y++){if(zn){var u=[];var q=n[y].parentNode;var k=zk=='*';while(d.isElementNode(q)){if(k||q.tagName.toLowerCase()==zk)u.push(q);q=q.parentNode;}}else var u=n[y].getElementsByTagName(zk);var v=u.length;for(var zb=0;zb<v;zb++)zm.push(u[zb]);}for(var zh=1;zh<zj.length;zh++){var zi=zj[zh];var z=zi.charAt(0)=='.';var o=zi.substring(1);for(var y=0;y<zm.length;y++){var zl=zm[y];if(!zl)continue;if(z){if(!c.hasClass(zl,o))delete zm[y];continue;}else{var p=zi.slice(1,zi.length-1);if(p.indexOf('=')==-1){if(zl.getAttribute(p)===null){delete zm[y];continue;}}else{var zd=p.split('=');var l=zd[0];var zo=zd[1];zo=zo.slice(1,zo.length-1);if(zl.getAttribute(l)!=zo){delete zm[y];continue;}}}}}for(var y=0;y<zm.length;y++)if(zm[y]){zc.push(zm[y]);if(zn)break;}}n=zc;}return n;},getText:(function(){var k=document.createElement('div'),l=k.textContent!=null?'textContent':'innerText';return function(m){if(!m){return '';}else if(d.isTextNode(m)){return m.data;}else return m[l];};})(),getSelection:function(){var l=window.getSelection,k=document.selection;if(l){return l()+'';}else if(k)return k.createRange().text;return null;},create:function(m,k,l){m=document.createElement(m);if(k){k=copy_properties({},k);if(k.style){copy_properties(m.style,k.style);delete k.style;}for(var n in k)if(n.toLowerCase().indexOf('on')==0){if(!(typeof k[n]!='function'))if(window.Event&&Event.listen){Event.listen(m,n.substr(2),k[n]);}else m[n]=k[n];delete k[n];}copy_properties(m,k);}if(l!=undefined)d.setContent(m,l);return m;},prependContent:function(m,l){if(!d.isNode(m))throw new Error('DOM.prependContent: reference element is not a node');var k=function(n){if(m.firstChild){m.insertBefore(n,m.firstChild);}else m.appendChild(n);};return d._addContent(l,k,m);},insertAfter:function(m,l){if(!d.isNode(m)||!m.parentNode)throw new Error('DOM.insertAfter: reference element is not a node');var k=function(n){if(m.nextSibling){m.parentNode.insertBefore(n,m.nextSibling);}else m.parentNode.appendChild(n);};return d._addContent(l,k,m.parentNode);},insertBefore:function(l,m){if(!d.isNode(m)||!m.parentNode)throw new Error('DOM.insertBefore: reference element is not a node or '+'does not have a parent.');var k=function(n){m.parentNode.insertBefore(n,m);};return d._addContent(l,k,m.parentNode);},setContent:function(l,k){if(!d.isNode(l))throw new Error('DOM.setContent: reference element is not a node');d.empty(l);return d.appendContent(l,k);},appendContent:function(m,l){if(!d.isNode(m))throw new Error('DOM.appendContent: reference element is not a node');var k=function(n){m.appendChild(n);};return d._addContent(l,k,m);},replace:function(m,l){if(!d.isNode(m)||!m.parentNode)throw new Error('DOM.replace: reference element must be a node with a'+' parent');var k=function(n){m.parentNode.replaceChild(n,m);};return d._addContent(l,k,m.parentNode);},remove:function(k){k=a(k);if(k.parentNode)k.parentNode.removeChild(k);},empty:function(k){k=a(k);while(k.firstChild)d.remove(k.firstChild);},contains:function(l,k){l=g(l);k=g(k);if(!l||!k){return false;}else if(l===k){return true;}else if(d.isTextNode(l)){return false;}else if(d.isTextNode(k)){return d.contains(l,k.parentNode);}else if(l.contains){return l.contains(k);}else if(l.compareDocumentPosition){return !!(l.compareDocumentPosition(k)&16);}else return false;},getRootElement:function(){var k=null;if(window.Quickling&&Quickling.isActive())k=g('content');return k||document.body;},isNode:function(k){return !!(k&&(typeof Node=='object'?k instanceof Node:typeof k=="object"&&typeof k.nodeType=='number'&&typeof k.nodeName=='string'));},isNodeOfType:function(l,m){var k=Object.from($A(m).join('|').toUpperCase().split('|'));return d.isNode(l)&&l.nodeName in k;},isElementNode:function(k){return d.isNode(k)&&k.nodeType==1;},isTextNode:function(k){return d.isNode(k)&&k.nodeType==3;},_addContent:function(n,k,w){n=e.replaceJSONWrapper(n);if(n instanceof e&&-1==n.toString().indexOf('<scr'+'ipt')&&''==w.innerHTML){var q=ua.ie();if(!q||(q>7&&!d.isNodeOfType(w,['table','tbody','thead','tfoot','tr','select','fieldset']))){var r=q?"<em style=\"display:none;\">&nbsp;</em>":"";w.innerHTML=r+n;q&&w.removeChild(w.firstChild);return $A(w.childNodes);}}else if(d.isTextNode(w)){w.data=n;return [n];}var t,o=[],l=[];var p=document.createDocumentFragment();if(!(n instanceof Array))n=[n];for(var s=0;s<n.length;s++){t=e.replaceJSONWrapper(n[s]);if(t instanceof e){l.push(t.getAction());var v=t.getNodes(),m;for(var u=0;u<v.length;u++){m=(ua.safari()||(ua.ie()&&t.ieCloneBug()))?v[u]:v[u].cloneNode(true);o.push(m);p.appendChild(m);}}else if(is_scalar(t)){var x=document.createTextNode(t);o.push(x);p.appendChild(x);}else if(d.isNode(t)){o.push(t);p.appendChild(t);}else if(!(t instanceof Array))t!==null;}k(p);for(var s=0;s<l.length;s++)l[s]();return o;}};function b(m,k,l){if(typeof k!='object'||d.isNode(k)||k instanceof Array||e.isHTML(k)){l=k;k=null;}return d.create(m,k,l);}h.$N=d.$N=b;h.DOM=i.exports=d;},3);
function DOMControl(a){this.root=$(a);this.updating=false;DataStore.set(a,'DOMControl',this);}DOMControl.prototype={getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(a){if(!this.beginUpdate())return this;this.onupdate(a);this.endUpdate();},onupdate:function(a){}};DOMControl.getInstance=function(a){return DataStore.get(a,'DOMControl');};
add_properties('Input',{focus:function(a){try{a.focus();}catch(b){}},isEmpty:function(a){return !(/\S/).test(a.value||'')||CSS.hasClass(a,'DOMControl_placeholder');},getValue:function(a){return Input.isEmpty(a)?'':a.value;},setValue:function(b,d){CSS.removeClass(b,'DOMControl_placeholder');b.value=d||'';var c=b.getAttribute('maxlength');if(c>0)Bootloader.loadComponents('maxlength-form-listener',function(){Input.enforceMaxLength(b,c);});var a=DOMControl.getInstance(b);a&&a.resetHeight&&a.resetHeight();},setPlaceholder:function(a,b){a.setAttribute('title',b);a.setAttribute('placeholder',b);if(a==document.activeElement)return;if(Input.isEmpty(a)){CSS.conditionClass(a,'DOMControl_placeholder',b);a.value=b||'';}},reset:function(a){var b=a!==document.activeElement?(a.getAttribute('placeholder')||''):'';a.value=b;CSS.conditionClass(a,'DOMControl_placeholder',b);a.style.height='';},setSubmitOnEnter:function(a,b){CSS.conditionClass(a,'enter_submit',b);},getSubmitOnEnter:function(a){return CSS.hasClass(a,'enter_submit');}});
function URI(a){if(a===window)return;if(this===window)return new URI(a||window.location.href);this.parse(a||'');}copy_properties(URI,{getRequestURI:function(a,b){a=a===undefined||a;if(a&&window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getCurrentURI(!!b).getQualifiedURI();}else return new URI(window.location.href);},getMostRecentURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getMostRecentURI().getQualifiedURI();}else return new URI(window.location.href);},getNextURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getNextURI().getQualifiedURI();}else return new URI(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(g){if(!g)return {};var h={};g=g.replace(/%5B/ig,'[').replace(/%5D/ig,']');g=g.split('&');for(var b=0,d=g.length;b<d;b++){var e=g[b].match(URI.arrayQueryExpression);if(!e){var j=g[b].split('=');h[URI.decodeComponent(j[0])]=j[1]===undefined?null:URI.decodeComponent(j[1]);}else{var c=e[2].split(/\]\[|\[|\]/).slice(0,-1);var f=e[1];var k=URI.decodeComponent(e[3]||'');c[0]=f;var i=h;for(var a=0;a<c.length-1;a++)if(c[a]){if(i[c[a]]===undefined)if(c[a+1]&&!c[a+1].match(/\d+$/)){i[c[a]]={};}else i[c[a]]=[];i=i[c[a]];}else{if(c[a+1]&&!c[a+1].match(/\d+$/)){i.push({});}else i.push([]);i=i[i.length-1];}if(i instanceof Array&&c[c.length-1]==''){i.push(k);}else i[c[c.length-1]]=k;}}return h;},implodeQuery:function(f,e,a){e=e||'';if(a===undefined)a=true;var g=[];if(f===null||f===undefined){g.push(a?URI.encodeComponent(e):e);}else if(f instanceof Array){for(var c=0;c<f.length;++c)try{if(f[c]!==undefined)g.push(URI.implodeQuery(f[c],e?(e+'['+c+']'):c));}catch(b){}}else if(typeof(f)=='object'){if(DOM.isNode(f)){g.push('{node}');}else for(var d in f)try{if(f[d]!==undefined)g.push(URI.implodeQuery(f[d],e?(e+'['+d+']'):d));}catch(b){}}else if(a){g.push(URI.encodeComponent(e)+'='+URI.encodeComponent(f));}else g.push(e+'='+f);return g.join('&');},encodeComponent:function(d){var c=String(d).split(/([\[\]])/);for(var a=0,b=c.length;a<b;a+=2)c[a]=window.encodeURIComponent(c[a]);return c.join('');},decodeComponent:function(a){return window.decodeURIComponent(a.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',sanitizeDomain:function(a){var b=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(b.test(a)){return URI.INVALID_DOMAIN;}else return a;}});copy_properties(URI.prototype,{parse:function(b){var a=b.toString().match(URI.expression);copy_properties(this,{protocol:a[3]||'',domain:URI.sanitizeDomain(a[4]||''),port:a[6]||'',path:a[7]||'',query_s:a[9]||'',fragment:a[11]||''});return this;},setProtocol:function(a){this.protocol=a;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(a){this.query_s=URI.implodeQuery(a);return this;},addQueryData:function(a){return this.setQueryData(copy_properties(this.getQueryData(),a));},removeQueryData:function(b){if(!(b instanceof Array))b=[b];var d=this.getQueryData();for(var a=0,c=b.length;a<c;++a)delete d[b[a]];return this.setQueryData(d);},getQueryData:function(){return URI.explodeQuery(this.query_s);},setFragment:function(a){this.fragment=a;return this;},getFragment:function(){return this.fragment;},setDomain:function(a){this.domain=URI.sanitizeDomain(a);return this;},getDomain:function(){return this.domain;},setPort:function(a){this.port=a;return this;},getPort:function(){return this.port;},setPath:function(a){this.path=a;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var a='';this.protocol&&(a+=this.protocol+'://');this.domain&&(a+=this.domain);this.port&&(a+=':'+this.port);if(this.domain&&!this.path)a+='/';this.path&&(a+=this.path);this.query_s&&(a+='?'+this.query_s);this.fragment&&(a+='#'+this.fragment);return a;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!URI._facebookURIRegex)URI._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||URI._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){return window.Quickling&&Quickling.isActive()&&Quickling.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var b=this.domain.split('.');var a=b.indexOf('facebook');return b.slice(a).join('.');},getUnqualifiedURI:function(){return new URI(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var b=new URI(this);if(!b.getDomain()){var a=URI();b.setProtocol(a.getProtocol()).setDomain(a.getDomain()).setPort(a.getPort());}return b;},isSameOrigin:function(a){var b=a||window.location.href;if(!(b instanceof URI))b=new URI(b.toString());if(this.getProtocol()&&this.getProtocol()!=b.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=b.getDomain())return false;return true;},go:function(a){goURI(this,a);},setSubdomain:function(b){var c=new URI(this).getQualifiedURI();var a=c.getDomain().split('.');if(a.length<=2){a.unshift(b);}else a[0]=b;return c.setDomain(a.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var a=this.getDomain().split('.');if(a.length<=2){return '';}else return a[0];},setSecure:function(a){return this.setProtocol(a?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});
window.Event=window.Event||function(){};Event.__inlineSubmit=function(b,event){var a=Event.__getHandler&&Event.__getHandler(b,'submit');return a?null:Event.__bubbleSubmit(b,event);};Event.__bubbleSubmit=function(a,event){if(document.documentElement.attachEvent){var b;while(b!==false&&(a=a.parentNode))b=a.onsubmit?a.onsubmit(event):Event.__fire&&Event.__fire(a,'submit',event);return b;}};
Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function $E(a){a=a||window.event||{};if(!a._inherits_from_prototype)for(var c in Event.prototype)try{a[c]=Event.prototype[c];}catch(b){}return a;}(function(){copy_properties(Event.prototype,{_inherits_from_prototype:true,stop:function(){this.cancelBubble=true;this.stopPropagation&&this.stopPropagation();return this;},prevent:function(){this.returnValue=false;this.preventDefault&&this.preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){var g=this.target||this.srcElement;return g?$(g):null;},getRelatedTarget:function(){var g=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return g?$(g):null;},getModifiers:function(){var g={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};g.access=ua.osx()?g.control:g.alt;g.any=g.control||g.shift||g.alt||g.meta;return g;}});copy_properties(Event,{listen:function(h,q,j,n){if(typeof h=='string')h=$(h);if(typeof n=='undefined')n=Event.Priority.NORMAL;if(typeof q=='object'){var i={};for(var p in q)i[p]=Event.listen(h,p,q[p],n);return i;}if(q.match(/^on/i))throw new TypeError("Bad event name `"+event+"': use `click', not `onclick'.");q=q.toLowerCase();if(h.nodeName=='LABEL'&&q=='click'){var m=h.getElementsByTagName('input');h=m.length==1?m[0]:h;}var k=DataStore.get(h,b,{});if(f[q]){var g=f[q];q=g.base;j=g.wrap(j);}a(h,q);var r=k[q];if(!(n in r))r[n]=[];var l=r[n].length,o=new EventHandlerRef(j,r[n],l);r[n].push(o);return o;},stop:function(g){return $E(g).stop();},prevent:function(g){return $E(g).prevent();},kill:function(g){return $E(g).kill();},getKeyCode:function(event){event=$E(event);if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!e){var g=values(Event.Priority);g.sort(function(h,i){return h-i;});e=g;}return e;},__fire:function(g,i,event){var h=Event.__getHandler(g,i);if(h)return h($E(event));},__getHandler:function(g,h){return DataStore.get(g,Event.DATASTORE_KEY+h);}});var e=null,b=Event.DATASTORE_KEY;var c=function(g){return function(h){if(!DOM.contains(this,h.getRelatedTarget()))return g.call(this,h);};};var f={mouseenter:{base:'mouseover',wrap:c},mouseleave:{base:'mouseout',wrap:c}};var a=function(g,m){var h='on'+m;var k=d.bind(g);var j=DataStore.get(g,b);if(m in j)return;j[m]={};if(g.addEventListener){g.addEventListener(m,k,false);}else if(g.attachEvent)g.attachEvent(h,k);DataStore.set(g,b+m,k);if(g[h]){var l=g===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL;var i=g[h];g[h]=null;Event.listen(g,m,i,l);}if(g.nodeName==='FORM'&&m==='submit')Event.listen(g,m,Event.__bubbleSubmit.curry(g),Event.Priority._BUBBLE);};var d=function(event){event=$E(event);var n=event.type;if(!DataStore.get(this,b))throw new Error("Bad listenHandler context.");var o=DataStore.get(this,b)[n];if(!o)throw new Error("No registered handlers for `"+n+"'.");if(n=='click'){var i=Parent.byTag(event.getTarget(),'a');var p=user_action('click',i,event);if(window.ArbiterMonitor)ArbiterMonitor.initUA(p,[i]);}var k=Event.getPriorities();for(var j=0;j<k.length;j++){var l=k[j];if(l in o){var g=o[l];for(var h=0;h<g.length;h++){if(!g[h])continue;var m=g[h].fire(this,event);if(m===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;};})();Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function EventHandlerRef(b,a,c){this._handler=b;this._container=a;this._index=c;}EventHandlerRef.prototype={remove:function(){delete this._handler;delete this._container[this._index];},fire:function(a,event){return this._handler.call(a,event);}};
__d("vector",[],function(e,f,g,d){function a(i,j,h){copy_properties(this,{x:parseFloat(i),y:parseFloat(j),domain:h||'pure'});}copy_properties(a.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(j,k){if(arguments.length==1){if(j.domain!='pure')j=j.convertTo(this.domain);return this.add(j.x,j.y);}var h=parseFloat(j);var i=parseFloat(k);return new a(this.x+h,this.y+i,this.domain);},mul:function(h,i){if(typeof(i)=="undefined")i=h;return new a(this.x*h,this.y*i,this.domain);},sub:function(h,i){if(arguments.length==1){return this.add(h.mul(-1));}else return this.add(-h,-i);},distanceTo:function(h){return this.sub(h).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(h){if(h!='pure'&&h!='viewport'&&h!='document')return new a(0,0);if(h==this.domain)return new a(this.x,this.y,this.domain);if(h=='pure')return new a(this.x,this.y);if(this.domain=='pure')return new a(0,0);var i=a.getScrollPosition('document');var j=this.x,k=this.y;if(this.domain=='document'){j-=i.x;k-=i.y;}else{j+=i.x;k+=i.y;}return new a(j,k,h);},setElementPosition:function(h){var i=this.convertTo('document');h.style.left=parseInt(i.x)+'px';h.style.top=parseInt(i.y)+'px';return this;},setElementDimensions:function(h){return this.setElementWidth(h).setElementHeight(h);},setElementWidth:function(h){h.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(h){h.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(h){if(h==document.body){window.scrollBy(this.x,this.y);}else{h.scrollLeft+=this.x;h.scrollTop+=this.y;}return this;}});copy_properties(a,{getEventPosition:function(i,h){h=h||'document';i=$E(i);var k=i.pageX||(i.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var l=i.pageY||(i.clientY+(document.documentElement.scrollTop||document.body.scrollTop));var j=new a(k,l,'document');return j.convertTo(h);},getScrollPosition:function(h){h=h||'document';var i=document.body.scrollLeft||document.documentElement.scrollLeft;var j=document.body.scrollTop||document.documentElement.scrollTop;return new a(i,j,'document').convertTo(h);},getElementPosition:function(j,i){i=i||'document';if(!j)return;if(!('getBoundingClientRect' in j))return new a(0,0,'document');var l=j.getBoundingClientRect(),h=document.documentElement,k=Math.round(l.left)-h.clientLeft,m=Math.round(l.top)-h.clientTop;return new a(k,m,'viewport').convertTo(i);},getElementDimensions:function(h){return new a(h.offsetWidth||0,h.offsetHeight||0);},getViewportDimensions:function(){var h=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0;var i=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return new a(h,i,'viewport');},getDocumentDimensions:function(){var h=(document&&document.documentElement&&document.documentElement.scrollWidth)||(document&&document.body&&document.body.scrollWidth)||0;var i=(document&&document.documentElement&&document.documentElement.scrollHeight)||(document&&document.body&&document.body.scrollHeight)||0;return new a(h,i,'document');},deserialize:function(i){var h=i.split(',');return new a(h[0],h[1]);}});function b(h){return a.getElementPosition(h,'document').x;}function c(h){return a.getElementPosition(h,'document').y;}e.elementY=c;e.elementX=b;e.Vector2=f.exports=a;},3);
__d("css",["dom","css-core"],function(d,e,f,c){var b=f('dom');var a=f('css-core');copy_properties(a,{shown:function(g){return !a.hasClass(g,'hidden_elem');},toggle:function(g){a.conditionShow(g,!a.shown(g));},setClass:function(h,g){$(h).className=g||'';return h;},setStyle:function(g,h,i){switch(h){case 'opacity':g.style.opacity=i;g.style.filter=i!==''?'alpha(opacity='+i*100+')':'';break;case 'float':g.style.cssFloat=g.style.styleFloat=i;break;default:h=h.replace(/-(.)/g,function(j,k){return k.toUpperCase();});g.style[h]=i;}return g;},getStyle:function(h,j){h=$(h);j=j.replace(/-(.)/g,function(k,l){return l.toUpperCase();});function i(k){return k.replace(/([A-Z])/g,'-$1').toLowerCase();}if(window.getComputedStyle){var g=window.getComputedStyle(h,null);if(g)return g.getPropertyValue(i(j));}if(document.defaultView&&document.defaultView.getComputedStyle){var g=document.defaultView.getComputedStyle(h,null);if(g)return g.getPropertyValue(i(j));if(j=="display")return "none";}if(h.currentStyle)return h.currentStyle[j];return h.style[j];},getStyleFloat:function(g,h){return parseFloat(a.getStyle(g,h),10);},getOpacity:function(g){g=$(g);var h=a.getStyle(g,'filter');var i=null;if(h&&(i=/(\d+(?:\.\d+)?)/.exec(h))){return parseFloat(i.pop())/100;}else if(h=a.getStyle(g,'opacity')){return parseFloat(h);}else return 1;},isFixed:function(g){while(g!==document.documentElement){if(a.getStyle(g,'position')==='fixed')return true;g=g.parentNode;}return false;},getScrollParent:function(g){while(g!==document.body){var h=a.getStyle(g,'overflow');if(h==='auto'||h==='scroll')return g;g=g.parentNode;}return window;}});e.exports=a;},3);
function animation(a){if(a==undefined)return;if(this==window){return new animation(a);}else{this.obj=a;this._reset_state();this.queue=[];this.last_attr=null;}}animation.resolution=20;animation.offset=0;animation.prototype._reset_state=function(){this.state={attrs:{},duration:500};};animation.prototype.stop=function(){this._reset_state();this.queue=[];return this;};animation.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var b=document.createElement('div');b.style.padding='0px';b.style.margin='0px';b.style.border='0px';b.__animation_refs=1;var a=this.obj.childNodes;while(a.length)b.appendChild(a[0]);this.obj.appendChild(b);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=b;this._refresh_container();};animation.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};animation.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var a=this.container_div.childNodes;while(a.length)this.obj.appendChild(a[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};animation.ATTR_TO=1;animation.ATTR_BY=2;animation.ATTR_FROM=3;animation.prototype._attr=function(a,d,c){a=a.replace(/-[a-z]/gi,function(e){return e.substring(1).toUpperCase();});var b=false;switch(a){case 'background':this._attr('backgroundColor',d,c);return this;case 'margin':d=animation.parse_group(d);this._attr('marginBottom',d[0],c);this._attr('marginLeft',d[1],c);this._attr('marginRight',d[2],c);this._attr('marginTop',d[3],c);return this;case 'padding':d=animation.parse_group(d);this._attr('paddingBottom',d[0],c);this._attr('paddingLeft',d[1],c);this._attr('paddingRight',d[2],c);this._attr('paddingTop',d[3],c);return this;case 'backgroundColor':case 'borderColor':case 'color':d=animation.parse_color(d);break;case 'opacity':d=parseFloat(d,10);break;case 'height':case 'width':if(d=='auto'){b=true;}else d=parseInt(d,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':d=parseInt(d,10);break;default:throw new Error(a+' is not a supported attribute!');}if(this.state.attrs[a]===undefined)this.state.attrs[a]={};if(b)this.state.attrs[a].auto=true;switch(c){case animation.ATTR_FROM:this.state.attrs[a].start=d;break;case animation.ATTR_BY:this.state.attrs[a].by=true;case animation.ATTR_TO:this.state.attrs[a].value=d;break;}};animation._get_box_width=function(c){var d=parseInt(CSS.getStyle(c,'paddingLeft'),10),e=parseInt(CSS.getStyle(c,'paddingRight'),10),a=parseInt(CSS.getStyle(c,'borderLeftWidth'),10),b=parseInt(CSS.getStyle(c,'borderRightWidth'),10);return c.offsetWidth-(d?d:0)-(e?e:0)-(a?a:0)-(b?b:0);};animation._get_box_height=function(c){var e=parseInt(CSS.getStyle(c,'paddingTop'),10),d=parseInt(CSS.getStyle(c,'paddingBottom'),10),a=parseInt(CSS.getStyle(c,'borderTopWidth'),10),b=parseInt(CSS.getStyle(c,'borderBottomWidth'),10);return c.offsetHeight-(e?e:0)-(d?d:0)-(a?a:0)-(b?b:0);};animation.prototype.to=function(a,b){if(b===undefined){this._attr(this.last_attr,a,animation.ATTR_TO);}else{this._attr(a,b,animation.ATTR_TO);this.last_attr=a;}return this;};animation.prototype.by=function(a,b){if(b===undefined){this._attr(this.last_attr,a,animation.ATTR_BY);}else{this._attr(a,b,animation.ATTR_BY);this.last_attr=a;}return this;};animation.prototype.from=function(a,b){if(b===undefined){this._attr(this.last_attr,a,animation.ATTR_FROM);}else{this._attr(a,b,animation.ATTR_FROM);this.last_attr=a;}return this;};animation.prototype.duration=function(a){this.state.duration=a?a:0;return this;};animation.prototype.checkpoint=function(b,a){if(b===undefined)b=1;this.state.checkpoint=b;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=a;return this;};animation.prototype.blind=function(){this.state.blind=true;return this;};animation.prototype.hide=function(){this.state.hide=true;return this;};animation.prototype.show=function(){this.state.show=true;return this;};animation.prototype.ease=function(a){this.state.ease=a;return this;};animation.prototype.go=function(){var b=(new Date()).getTime();this.queue.push(this.state);for(var a=0;a<this.queue.length;a++){this.queue[a].start=b-animation.offset;if(this.queue[a].checkpoint)b+=this.queue[a].checkpoint*this.queue[a].duration;}animation.push(this);return this;};animation.prototype._show=function(){CSS.show(this.obj);};animation.prototype._hide=function(){CSS.hide(this.obj);};animation.prototype._frame=function(m){var c=true;var l=false;var o=false;var n;function d(p){return document.documentElement[p]||document.body[p];}for(var e=0;e<this.queue.length;e++){var b=this.queue[e];if(b.start>m){c=false;continue;}if(b.checkpointcb){this._callback(b.checkpointcb,m-b.start);b.checkpointcb=null;}if(b.started===undefined){if(b.show)this._show();for(var a in b.attrs){if(b.attrs[a].start!==undefined)continue;switch(a){case 'backgroundColor':case 'borderColor':case 'color':n=animation.parse_color(CSS.getStyle(this.obj,a=='borderColor'?'borderLeftColor':a));if(b.attrs[a].by){b.attrs[a].value[0]=Math.min(255,Math.max(0,b.attrs[a].value[0]+n[0]));b.attrs[a].value[1]=Math.min(255,Math.max(0,b.attrs[a].value[1]+n[1]));b.attrs[a].value[2]=Math.min(255,Math.max(0,b.attrs[a].value[2]+n[2]));}break;case 'opacity':n=CSS.getOpacity(this.obj);if(b.attrs[a].by)b.attrs[a].value=Math.min(1,Math.max(0,b.attrs[a].value+n));break;case 'height':n=animation._get_box_height(this.obj);if(b.attrs[a].by)b.attrs[a].value+=n;break;case 'width':n=animation._get_box_width(this.obj);if(b.attrs[a].by)b.attrs[a].value+=n;break;case 'scrollLeft':case 'scrollTop':n=(this.obj===document.body)?d(a):this.obj[a];if(b.attrs[a].by)b.attrs[a].value+=n;b['last'+a]=n;break;default:n=parseInt(CSS.getStyle(this.obj,a),10)||0;if(b.attrs[a].by)b.attrs[a].value+=n;break;}b.attrs[a].start=n;}if((b.attrs.height&&b.attrs.height.auto)||(b.attrs.width&&b.attrs.width.auto)){if(ua.firefox()<3)o=true;this._destroy_container();for(var a in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(b.attrs[a])this.obj.style[a]=b.attrs[a].value+(typeof b.attrs[a].value=='number'?'px':'');if(b.attrs.height&&b.attrs.height.auto)b.attrs.height.value=animation._get_box_height(this.obj);if(b.attrs.width&&b.attrs.width.auto)b.attrs.width.value=animation._get_box_width(this.obj);}b.started=true;if(b.blind)this._build_container();}var i=(m-b.start)/b.duration;if(i>=1){i=1;if(b.hide)this._hide();}else c=false;var k=b.ease?b.ease(i):i;if(!l&&i!=1&&b.blind)l=true;if(o&&this.obj.parentNode){var j=this.obj.parentNode;var h=this.obj.nextSibling;j.removeChild(this.obj);}for(var a in b.attrs)switch(a){case 'backgroundColor':case 'borderColor':case 'color':this.obj.style[a]='rgb('+animation.calc_tween(k,b.attrs[a].start[0],b.attrs[a].value[0],true)+','+animation.calc_tween(k,b.attrs[a].start[1],b.attrs[a].value[1],true)+','+animation.calc_tween(k,b.attrs[a].start[2],b.attrs[a].value[2],true)+')';break;case 'opacity':CSS.setStyle(this.obj,'opacity',animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value));break;case 'height':case 'width':this.obj.style[a]=k==1&&b.attrs[a].auto?'auto':animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var f=this.obj===document.body;n=f?d(a):this.obj[a];if(b['last'+a]!==n){delete b.attrs[a];}else{var g=animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value,true);if(!f){g=this.obj[a]=g;}else{if(a=='scrollLeft'){window.scrollTo(g,d('scrollTop'));}else window.scrollTo(d('scrollLeft'),g);g=d(a);}b['last'+a]=g;}break;default:this.obj.style[a]=animation.calc_tween(k,b.attrs[a].start,b.attrs[a].value,true)+'px';break;}if(i==1){this.queue.splice(e--,1);this._callback(b.ondone,m-b.start-b.duration);}}if(o)j[h?'insertBefore':'appendChild'](this.obj,h);if(!l&&this.container_div)this._destroy_container();return !c;};animation.prototype.ondone=function(a){this.state.ondone=a;return this;};animation.prototype._callback=function(a,b){if(a){animation.offset=b;a.call(this);animation.offset=0;}};animation.calc_tween=function(a,b,c,d){return (d?parseInt:parseFloat)((c-b)*a+b,10);};animation.parse_color=function(a){var b=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(a);if(b){return [parseInt(b[1].length==1?b[1]+b[1]:b[1],16),parseInt(b[2].length==1?b[2]+b[2]:b[2],16),parseInt(b[3].length==1?b[3]+b[3]:b[3],16)];}else{var c=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(a);if(c){if(c[4]==='0'){return [255,255,255];}else return [parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];}else if(a=='transparent'){return [255,255,255];}else throw 'Named color attributes are not supported.';}};animation.parse_group=function(a){a=trim(a).split(/ +/);if(a.length==4){return a;}else if(a.length==3){return [a[0],a[1],a[2],a[1]];}else if(a.length==2){return [a[0],a[1],a[0],a[1]];}else return [a[0],a[0],a[0],a[0]];};animation.push=function(a){if(!animation.active)animation.active=[];animation.active.push(a);if(animation.active.length===1){if(!animation.requestAnimationFrame){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;if(b)animation.requestAnimationFrame=b.bind(window);}if(animation.requestAnimationFrame){animation.requestAnimationFrame(animation._animate);}else animation.timeout=setInterval(animation._animate,animation.resolution,false);}if(animation.requestAnimationFrame)animation._updateEndingTimer();animation._animate(new Date().getTime(),true);};animation._updateEndingTimer=function(){if(!animation.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var d=0;for(var a=0;a<animation.active.length;a++){var f=animation.active[a];for(var e=0;e<f.queue.length;e++){var b=f.queue[e].start+f.queue[e].duration;if(b>d)d=b;}}if(animation.timeout){clearTimeout(animation.timeout);delete animation.timeout;}var c=new Date().getTime();if(d>c)animation.timeout=setTimeout(animation._animate.shield(),d-c,false);};animation._animate=function(d,c){d=d||new Date().getTime();for(var b=(c===true)?animation.active.length-1:0;b<animation.active.length;b++)try{if(!animation.active[b]._frame(d))animation.active.splice(b--,1);}catch(a){animation.active.splice(b--,1);}if(animation.active.length===0){if(animation.timeout){if(animation.requestAnimationFrame){clearTimeout(animation.timeout);}else clearInterval(animation.timeout);delete animation.timeout;}}else if(animation.requestAnimationFrame)animation.requestAnimationFrame(animation._animate);};animation.ease={};animation.ease.begin=function(a){return Math.sin(Math.PI/2*(a-1))+1;};animation.ease.end=function(a){return Math.sin(.5*Math.PI*a);};animation.ease.both=function(a){return .5*Math.sin(Math.PI*(a-.5))+.5;};animation.prependInsert=function(b,a){animation.insert(b,a,DOM.prependContent);};animation.appendInsert=function(b,a){animation.insert(b,a,DOM.appendContent);};animation.insert=function(c,a,b){CSS.setStyle(a,'opacity',0);b(c,a);animation(a).from('opacity',0).to('opacity',1).duration(400).go();};
!function(){function a(b){return function(){if(this===window)throw new TypeError();return b.apply(this,arguments);};}copy_properties(Array.prototype,{map:function(c,b){if(this===window||typeof c!='function')throw new TypeError();var d;var e=this.length;var f=new Array(e);for(d=0;d<e;++d)if(d in this)f[d]=c.call(b,this[d],d,this);return f;},forEach:function(c,b){this.map(c,b);return this;},filter:function(c,b){c=c||function(h){return h;};if(this===window||typeof c!='function')throw new TypeError();var d,g,e=this.length,f=[];for(d=0;d<e;++d)if(d in this){g=this[d];if(c.call(b,g,d,this))f.push(g);}return f;},every:function(d,c){var b=this.filter(function(){return 1;});return (this.filter(d,c).length==b.length);},some:function(c,b){return (this.filter(c,b).length>0);},reduce:null,reduceRight:null,sort:a(Array.prototype.sort),reverse:a(Array.prototype.reverse),concat:a(Array.prototype.concat),slice:a(Array.prototype.slice),indexOf:a(Array.prototype.indexOf||function(d,b){var c=this.length;b|=0;if(b<0)b+=c;for(;b<c;b++)if(b in this&&this[b]===d)return b;return -1;}),contains:function(b){return this.indexOf(b)!=-1;},remove:function(c){var b=this.indexOf(c);if(b!=-1)this.splice(b,1);}});Array.prototype.each=Array.prototype.forEach;Array.prototype.clone=Array.prototype.slice;}();
var Button=(function(){var b='uiButtonDisabled';var a='uiButtonDepressed';var d='button:blocker';var c='href';function e(j,i){var h=DataStore.get(j,d);if(i){if(h){h.remove();DataStore.remove(j,d);}}else if(!h)DataStore.set(j,d,Event.listen(j,'click',bagof(false),Event.Priority.URGENT));}function f(h){var i=Parent.byClass(h,'uiButton');if(!i)throw new Error('invalid use case');return i;}function g(h){return DOM.isNodeOfType(h,'a');}return {getInputElement:function(h){h=f(h);if(g(h))throw new Error('invalid use case');return DOM.find(h,'input');},isEnabled:function(h){return !CSS.hasClass(f(h),b);},setEnabled:function(k,h){k=f(k);CSS.conditionClass(k,b,!h);if(g(k)){var i=k.href;var l=DataStore.get(k,c,'#');if(h){if(!i)k.href=l;}else{if(i&&i!==l)DataStore.set(k,c,i);k.removeAttribute('href');}e(k,h);}else{var j=Button.getInputElement(k);j.disabled=!h;e(j,h);}},setDepressed:function(i,h){CSS.conditionClass(f(i),a,h);},isDepressed:function(h){return CSS.hasClass(f(h),a);},setLabel:function(i,h){i=f(i);if(g(i)){var j=DOM.find(i,'span.uiButtonText');DOM.setContent(j,h);}else Button.getInputElement(i).value=h;CSS.conditionClass(i,'uiButtonNoText',!h);},setIcon:function(i,h){if(!DOM.isNode(h))return;CSS.addClass(h,'customimg');i=f(i);var j=DOM.scry(i,'.img')[0];if(j!=h)if(j){DOM.replace(j,h);}else DOM.prependContent(i,h);}};})();
__d("css-support",["css-core"],function(c,d,e,b){var a=e('css-core');copy_properties(a,{supportsBorderRadius:function(){var h=['KhtmlBorderRadius','OBorderRadius','MozBorderRadius','WebkitBorderRadius','msBorderRadius','borderRadius'];var i=false,f=document.createElement('div');for(var g=h.length;g>=0;g--)if(i=f.style[h[g]]!==undefined)break;a.supportsBorderRadius=bagof(i);return i;}});d.exports=a;},3);
function show(){for(var b=0;b<arguments.length;b++){var a=ge(arguments[b]);if(a&&a.style)a.style.display='';}return false;}function hide(){for(var b=0;b<arguments.length;b++){var a=ge(arguments[b]);if(a&&a.style)a.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var b=0;b<arguments.length;b++){var a=$(arguments[b]);a.style.display=CSS.getStyle(a,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var b=0;b<arguments.length;b++){var a=$(arguments[b]);if(shown(a)){hide(a);}else show(a);}return false;}
function tx(b,a){if(typeof _string_table=='undefined')return;b=_string_table[b];return _tx(b,a);}function intl_ends_in_punct(a){if(typeof a!='string')return false;return a.match(new RegExp(intl_ends_in_punct.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}intl_ends_in_punct.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function intl_render_list_separator(){return _tx("{previous-items}, {next-items}",{'previous-items':'','next-items':''});}function intl_phonological_rules(g){var e,d=g,f=window.intl_locale_rewrites,b,c;try{if(f){var pats=[],reps=[];for(var p in f.patterns){var pat=p,rep=f.patterns[p];for(b in f.meta){e=new RegExp(b.slice(1,-1),'g');pat=pat.replace(e,f.meta[b]);rep=rep.replace(e,f.meta[b]);}pats[pats.length]=pat;reps[reps.length]=rep;}for(var ii=0;ii<pats.length;ii++){e=new RegExp(pats[ii].slice(1,-1),'g');if(reps[ii]=='javascript'){c=g.match(e);b=c&&c[0];if(b)g=g.replace(e,b.slice(1).toLowerCase());}else g=g.replace(e,reps[ii]);}}}catch(a){g=d;}e=new RegExp('\x01','g');g=g.replace(e,'');return g;}function _tx(e,a){if(!a)return e;var d;for(var c in a){if(intl_ends_in_punct(a[c])){d=new RegExp('\\{'+c+'\\}'+intl_ends_in_punct.punct_char_class+'*','g');}else d=new RegExp('\\{'+c+'\\}','g');var b='';if(a[c][0]!='~')b='\x01';e=e.replace(d,b+a[c]+b);}e=intl_phonological_rules(e);return e;}
function intl_locale_is_rtl(){return ('rtl'==CSS.getStyle(document.body,'direction'));}
var KEYS={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188};
__d("ua",[],function(b,c,d,a){var e={ie:function(){return e._populate()||this._ie;},ie64:function(){return e.ie()&&this._win64;},firefox:function(){return e._populate()||this._firefox;},opera:function(){return e._populate()||this._opera;},safari:function(){return e._populate()||this._safari;},chrome:function(){return e._populate()||this._chrome;},windows:function(){return e._populate()||this._windows;},osx:function(){return e._populate()||this._osx;},linux:function(){return e._populate()||this._linux;},iphone:function(){return e._populate()||this._iphone;},_populated:false,_populate:function(){if(e._populated)return;e._populated=true;var i=navigator.userAgent;var f=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(i);var h=/(Mac OS X)|(Windows)|(Linux)/.exec(i);var g=/\b(iPhone|iP[ao]d)/.exec(i);e._win64=!!(/Win64/.exec(i));if(f){e._ie=f[1]?parseFloat(f[1]):NaN;if(e._ie&&document.documentMode)e._ie=document.documentMode;e._firefox=f[2]?parseFloat(f[2]):NaN;e._opera=f[3]?parseFloat(f[3]):NaN;e._safari=f[4]?parseFloat(f[4]):NaN;if(e._safari){f=/(?:Chrome\/(\d+\.\d+))/.exec(i);e._chrome=f&&f[1]?parseFloat(f[1]):NaN;}else e._chrome=NaN;}else e._ie=e._firefox=e._opera=e._chrome=e._safari=NaN;if(h){if(h[1]){var j=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(i);e._osx=j?parseFloat(j[1].replace('_','.')):true;}else e._osx=false;e._windows=!!h[2];e._linux=!!h[3];}else e._osx=e._windows=e._linux=false;e._iphone=g;}};b.ua=c.exports=e;},3);
OnloadEvent={ONLOAD:'onload/onload',ONLOAD_CALLBACK:'onload/onload_callback',ONLOAD_DOMCONTENT:'onload/dom_content_ready',ONLOAD_DOMCONTENT_CALLBACK:'onload/domcontent_callback',ONBEFOREUNLOAD:'onload/beforeunload',ONUNLOAD:'onload/unload'};function _include_quickling_events_default(){return !window.loading_page_chrome;}function onbeforeunloadRegister(a,b){if(b===undefined)b=_include_quickling_events_default();b?_addHook('onbeforeleavehooks',a):_addHook('onbeforeunloadhooks',a);}function onunloadRegister(a){if(!window.onunload)window.onunload=function(){Arbiter.inform(OnloadEvent.ONUNLOAD,true,Arbiter.BEHAVIOR_STATE);};_addHook('onunloadhooks',a);}function onleaveRegister(a){_addHook('onleavehooks',a);}function _addHook(b,a){window[b]=(window[b]||[]).concat(a);}function removeHook(a){window[a]=[];}function _domcontentready(){Arbiter.inform(OnloadEvent.ONLOAD_DOMCONTENT,true,Arbiter.BEHAVIOR_STATE);}function _bootstrapEventHandlers(){var a=document,e=window;if(a.addEventListener){if(ua.safari()<525){var d=setInterval(function(){if(/loaded|complete/.test(a.readyState)){_domcontentready();clearInterval(d);}},10);}else a.addEventListener("DOMContentLoaded",_domcontentready,true);}else{var c='javascript:void(0)';if(e.location.protocol=='https:')c='//:';a.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+c+'"><\/script\>');}var b=e.onload;e.onload=function(){e.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_layout');b&&b();Arbiter.inform(OnloadEvent.ONLOAD,true,Arbiter.BEHAVIOR_STATE);};e.onbeforeunload=function(){var f={};Arbiter.inform(OnloadEvent.ONBEFOREUNLOAD,f,Arbiter.BEHAVIOR_STATE);if(!f.warn)Arbiter.inform('onload/exit',true);return f.warn;};}onload_callback=Arbiter.registerCallback(function(){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_onload');Arbiter.inform(OnloadEvent.ONLOAD_CALLBACK,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD]);domcontent_callback=Arbiter.registerCallback(function(){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_domcontent');Arbiter.inform(OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT]);if(!window._eventHandlersBootstrapped){_eventHandlersBootstrapped=true;_bootstrapEventHandlers();}
__d("async-signal",[],function(c,d,e,b){function a(g,f){this.data=f||{};if(window.Env&&Env.tracking_domain&&g.charAt(0)=='/')g=Env.tracking_domain+g;this.uri=g;this.handler=null;}a.prototype.setHandler=function(f){this.handler=f;return this;};AsyncSignalCounter={num_sends:0,num_responses:0,num_errors:0,copy:function copy(){return {num_sends:this.num_sends,num_responses:this.num_responses,num_errors:this.num_errors};}};a.prototype.send=function(){var h=this.handler,g=this.data,l=this.uri,k=[],i=new Image(),f=document.getElementById('post_form_id');g.asyncSignal=Math.floor(Math.random()*10000)+1;if(f)g.post_form_id=f.value;if(window.Env){g.__user=Env.user;if(Env.fb_isb)g.fb_isb=Env.fb_isb;}for(var j in g)k.push(encodeURIComponent(j)+'='+encodeURIComponent(g[j]));if(l.indexOf('?')==-1)l+='?';l+=k.join('&');h=h||bagofholding;i.onload=i.onerror=(function(n,m){return function(){AsyncSignalCounter.num_responses++;if(n.height!=1)AsyncSignalCounter.num_errors++;m((n.height==1));};})(i,h);AsyncSignalCounter.num_sends++;i.src=l;return this;};c.AsyncSignal=d.exports=a;},3);
function setCookie(a,b,d,e){if(env_get('no_cookies')&&a!='tpa')return;if(d){var f=new Date();var c=new Date();c.setTime(f.getTime()+d);}document.cookie=a+"="+encodeURIComponent(b)+"; "+(d?"expires="+c.toGMTString()+"; ":"")+"path="+(e||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}function clearCookie(a){document.cookie=a+"=; expires=Sat, 01 Jan 2000 00:00:00 GMT; "+"path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}function getCookie(d){var e=d+"=";var b=document.cookie.split(';');for(var c=0;c<b.length;c++){var a=b[c];while(a.charAt(0)==' ')a=a.substring(1,a.length);if(a.indexOf(e)==0)return decodeURIComponent(a.substring(e.length,a.length));}return null;}
function goURI(b,a){b=b.toString();if(!a&&window.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(b);}else if(window.location.href==b){window.location.reload();}else window.location.href=b;}function loadExternalJavascript(f,b,a){if(f instanceof Array){var e=f.shift(0);if(e){loadExternalJavascript(e,function(){if(f.length){loadExternalJavascript(f,b,a);}else b&&b();},a);}else if(b)b();}else{var c=a?document.body:document.getElementsByTagName('head')[0];var d=document.createElement('script');d.type='text/javascript';d.src=f;if(b){d.onerror=d.onload=b;d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded")b();};}c.appendChild(d);return d;}}function invoke_callbacks(b,d){if(b)for(var c=0;c<b.length;c++)try{(new Function(b[c])).apply(d);}catch(a){}}
function muffinize(d){var c='a';var b='d';var a=[c,b].join('');return d.replace(/muffin/g,a);}if(typeof console=='undefined')console={log:bagofholding,info:bagofholding,warn:bagofholding,debug:bagofholding,dir:bagofholding,error:bagofholding};window.Util=console;
if(!this.JSON)this.JSON=function(){function f(n){return n<10?'0'+n:n;}Date.prototype.toJSON=function(){return this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z';};var m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function stringify(value,whitelist){var a,i,k,l,v;switch(typeof value){case 'string':return (new RegExp('[\x00-\x1f\\\\"]')).test(value)?'"'+value.replace(/[\x00-\x1f\\"]/g,function(a){var c=m[a];if(c)return c;c=a.charCodeAt();return '\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"':'"'+value+'"';case 'number':return isFinite(value)?String(value):'null';case 'boolean':return String(value);case 'null':return 'null';case 'object':if(!value)return 'null';if('nodeName' in value)return null;if(typeof value.toJSON==='function')return stringify(value.toJSON());a=[];if(typeof value.length==='number'&&!(propertyIsEnumerable(value,'length'))){l=value.length;for(i=0;i<l;i+=1)a.push(stringify(value[i],whitelist)||'null');return '['+a.join(',')+']';}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==='string'){v=stringify(value[k],whitelist);if(v)a.push(stringify(k)+':'+v);}}}else for(k in value)if(typeof k==='string'){v=stringify(value[k],whitelist);if(v)a.push(stringify(k)+':'+v);}return '{'+a.join(',')+'}';}}return {stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==='object')for(i in v)if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined)v[i]=n;}return filter(k,v);}if(text&&/^[\],:{}\s]*$/.test(text.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof filter==='function'?walk('',j):j;}throw new SyntaxError('decodeJSON');}};}();function propertyIsEnumerable(a,b){if(a.propertyIsEnumerable)return a.propertyIsEnumerable(b);for(var c in a)if(c==b)return true;return false;}
var ErrorDialog={showAsyncError:function(b){try{return ErrorDialog.show(b.getErrorSummary(),b.getErrorDescription());}catch(a){alert(b);}},show:function(d,c,b,a){return (new Dialog()).setTitle(d).setBody(c).setButtons([Dialog.OK]).setStackable(true).setModal(true).setHandler(b||bagofholding).setButtonsMessage(a||'').show();}};
add_properties('Form',{getInputs:function(a){a=a||document;return [].concat($A(DOM.scry(a,'input')),$A(DOM.scry(a,'select')),$A(DOM.scry(a,'textarea')),$A(DOM.scry(a,'button')));},getSelectValue:function(a){return a.options[a.selectedIndex].value;},setSelectValue:function(b,c){for(var a=0;a<b.options.length;++a)if(b.options[a].value==c){b.selectedIndex=a;break;}},getRadioValue:function(b){for(var a=0;a<b.length;a++)if(b[a].checked)return b[a].value;return null;},getElements:function(a){return $A(a.tagName=='FORM'?a.elements:Form.getInputs(a));},getAttribute:function(b,a){return (b.getAttributeNode(a)||{}).value||null;},setDisabled:function(b,a){Form.getElements(b).forEach(function(c){if(c.disabled!=undefined){var d=DataStore.get(c,'origDisabledState');if(a){if(d===undefined)DataStore.set(c,'origDisabledState',c.disabled);c.disabled=a;}else{if(d!==true)c.disabled=false;DataStore.remove(c,'origDisabledState');}}});},bootstrap:function(d,e){var f=(Form.getAttribute(d,'method')||'GET').toUpperCase();e=Parent.byTag(e,'button')||e;var h=Parent.byClass(e,'stat_elem')||d;if(CSS.hasClass(h,'async_saving'))return;if(e&&(e.form!==d||(e.nodeName!='INPUT'&&e.nodeName!='BUTTON')||e.type!='submit')){var i=DOM.scry(d,'.enter_submit_target')[0];var b=e;i&&(e=i);}var c=Form.serialize(d,e);Form.setDisabled(d,true);var a=Form.getAttribute(d,'ajaxify')||Form.getAttribute(d,'action');trackReferrer(d,a);var g=new AsyncRequest(a);g.setData(c).setNectarModuleDataSafe(d).setReadOnly(f=='GET').setMethod(f).setRelativeTo(d).setStatusElement(h).setInitialHandler(Form.setDisabled.curry(d,false)).send();},serialize:function(b,c){var a={};Form.getElements(b).forEach(function(d){if(d.name&&!d.disabled&&d.type!='submit')if(!d.type||((d.type=='radio'||d.type=='checkbox')&&d.checked)||d.type=='text'||d.type=='password'||d.type=='hidden'||d.tagName=='TEXTAREA'){var h;if(d.name=='post_form_id')h=Env.post_form_id;Form._serializeHelper(a,d.name,h||Input.getValue(d));}else if(d.tagName=='SELECT')for(var e=0,f=d.options.length;e<f;++e){var g=d.options[e];if(g.selected)Form._serializeHelper(a,d.name,g.value);}});if(c&&c.name&&'submit'==c.type&&DOM.contains(b,c)&&DOM.isNodeOfType(c,['input','button']))Form._serializeHelper(a,c.name,c.value);return Form._serializeFix(a);},_serializeHelper:function(a,d,e){var c=/([^\]]+)\[([^\]]*)\](.*)/.exec(d);if(c){a[c[1]]=a[c[1]]||{};if(c[2]==''){var b=0;while(a[c[1]][b]!=undefined)b++;}else b=c[2];if(c[3]==''){a[c[1]][b]=e;}else Form._serializeHelper(a[c[1]],b.concat(c[3]),e);}else a[d]=e;},_serializeFix:function(a){var e=[];for(var b in a){if(a[b] instanceof Object)a[b]=Form._serializeFix(a[b]);e.push(b);}if(e.length>0){var d=0,c=true;e.sort().each(function(g){if(g!=d++)c=false;});if(c){var f=[];e.each(function(g){f[g]=a[g];});return f;}}return a;},post:function(d,b,c){var a=document.createElement('form');a.action=d.toString();a.method='POST';a.style.display='none';if(c)a.target=c;if(ge('post_form_id'))b.post_form_id=$('post_form_id').value;b.fb_dtsg=Env.fb_dtsg;b.post_form_id_source='dynamic_post';Form.createHiddenInputs(b,a);DOM.getRootElement().appendChild(a);a.submit();return false;},createHiddenInputs:function(g,a,d,f){d=d||{};var c;var h=URI.implodeQuery(g,'',false);var i=h.split('&');for(var b=0;b<i.length;b++)if(i[b]){var j=i[b].split('=');var e=j[0];var k=j[1];if(e===undefined||k===undefined)continue;k=URI.decodeComponent(k);if(d[e]&&f){d[e].value=k;}else{c=$N('input',{type:'hidden',name:e,value:k});d[e]=c;a.appendChild(c);}}return d;},getFirstElement:function(b,g){g=g||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var f=[];for(var d=0;d<g.length;d++){f=DOM.scry(b,g[d]);for(var c=0;c<f.length;c++){var e=f[c];try{if(elementY(e)>0&&elementX(e)>0)return e;}catch(a){}}}return null;},focusFirst:function(b){var a=Form.getFirstElement(b);if(a){a.focus();return true;}return false;}});
function Dialog(a){this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+Dialog._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._hidden_objects=[];this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(a)this._setFromModel(a);Dialog._init();}Metaprototype.makeFinal(Dialog);copy_properties(Dialog,{OK:{name:'ok',label:_tx("Okay")},CANCEL:{name:'cancel',label:_tx("Cancel"),className:'inputaux'},CLOSE:{name:'close',label:_tx("Close")},NEXT:{name:'next',label:_tx("Next")},SAVE:{name:'save',label:_tx("Save")},SUBMIT:{name:'submit',label:_tx("Submit")},CONFIRM:{name:'confirm',label:_tx("Confirm")},DELETE:{name:'delete',label:_tx("Delete")},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){Dialog.max_bottom=Math.max.apply(Math,Dialog._bottoms);}});copy_properties(Dialog,{OK_AND_CANCEL:[Dialog.OK,Dialog.CANCEL],_STANDARD_BUTTONS:[Dialog.OK,Dialog.CANCEL,Dialog.CLOSE,Dialog.SAVE,Dialog.SUBMIT,Dialog.CONFIRM,Dialog.DELETE],SHOULD_HIDE_OBJECTS:!ua.windows(),_useCSSBorders:CSS.supportsBorderRadius()||ua.ie()<=6,SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[],newButton:function(e,d,b,c){var a={name:e,label:d};if(b)a.className=b;if(c)a.handler=c;return a;},getCurrent:function(){var a=Dialog._stack;return a.length?a[a.length-1]:null;},bootstrap:function(i,a,f,d,e,c){a=a||{};var j=c&&c.rel=='dialog-pipe';copy_properties(a,new URI(i).getQueryData());d=d||(f?'GET':'POST');var h=Parent.byClass(c,'stat_elem')||c;if(h&&CSS.hasClass(h,'async_saving'))return false;var g;if(j){g=new AjaxPipeRequest();}else g=new AsyncRequest().setReadOnly(!!f).setMethod(d).setRelativeTo(c).setStatusElement(h);g.setURI(i).setNectarModuleDataSafe(c).setData(a);var b=new Dialog(e).setCausalElement(c).setAsync(g,j);b.show();return false;},_init:function(){this._init=bagofholding;onleaveRegister(Dialog._tearDown.shield(null,false));Arbiter.subscribe('page_transition',Dialog._tearDown.shield(null,true));Event.listen(document.documentElement,'keydown',function(event){if(Event.getKeyCode(event)==KEYS.ESC&&!event.getModifiers().any){if(Dialog._escape())event.kill();}else if(Event.getKeyCode(event)==KEYS.RETURN&&!event.getModifiers().any)if(Dialog._enter())event.kill();});Event.listen(window,'resize',function(event){var a=Dialog.getCurrent();a&&a._resetDialogObj();});},_findButton:function(a,c){if(a)for(var b=0;b<a.length;++b)if(a[b].name==c)return a[b];return null;},_tearDown:function(b){var c=Dialog._stack.clone();for(var a=c.length-1;a>=0;a--)if(!(b&&c[a]._cross_transition))c[a].hide();},_escape:function(){var d=Dialog.getCurrent();if(!d)return false;var e=d._semi_modal;var b=d._buttons;if(!b&&!e)return false;if(e&&!b){d.hide();return true;}var a;var c=Dialog._findButton(b,'cancel');if(d._cancelHandler){d.cancel();return true;}else if(c){a=c;}else if(b.length==1){a=b[0];}else return false;d._handleButton(a);return true;},_enter:function(){var b=Dialog.getCurrent();if(!b||!b._submit_on_enter)return false;if(document.activeElement!=b._frame)return false;var a=b._buttons;if(!a)return false;b._handleButton(a[0]);return true;},call_or_eval:function(obj,func,args){if(!func)return undefined;args=args||{};if(typeof(func)=='string'){var params=keys(args).join(', ');func=eval('({f: function('+params+') { '+func+'}})').f;}return func.apply(obj,values(args));}});copy_properties(Dialog.prototype,{_cross_transition:false,_fixed:false,_loading:false,_showing:false,show:function(){if(this._async_request&&this._show_loading){this.showLoading();}else{this._showing=true;this._update();}return this;},showLoading:function(){this._loading=true;CSS.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;},hide:function(){if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&Dialog._stack.length<=1){this._fadeOut();}else this._hide();return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return DOM.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(a){if(typeof a=='string')a=Dialog._findButton(this._buttons,a);if(!a||!a.name)return null;var b=DOM.scry(this._popup,'input');var c=function(d){return d.name==a.name;};return b.filter(c)[0]||null;},getContentNode:function(){return DOM.find(this._content,'div.dialog_content');},getFormData:function(){return Form.serialize(this.getContentNode());},setAllowCrossPageTransition:function(a){this._cross_transition=a;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:function(d){var c=this._nodes.title;var b=this._nodes.title_inner;var a=this._nodes.content;DOM.setContent(b,this._format(d||''));CSS.conditionShow(c,!!d);CSS.conditionClass(a,'dialog_content_titleless',!d);return this;},setBody:function(a){DOM.setContent(this._nodes.body,this._format(a));return this;},setExtraData:function(a){this._extra_data=a;return this;},setReturnData:function(a){this._return_data=a;return this;},setShowLoading:function(a){this._show_loading=a;return this;},setFullBleed:function(a){this._full_bleed=a;this._updateWidth();CSS.conditionClass(this._obj,'full_bleed',a);return this;},setCausalElement:function(a){this._causal_elem=a;return this;},setUserData:function(a){this._user_data=a;return this;},getUserData:function(){return this._user_data;},setAutohide:function(a){if(a){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),a);}else this._autohide=a;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:function(b){var a=this._nodes.summary;DOM.setContent(a,this._format(b||''));CSS.conditionShow(a,!!b);return this;},setButtons:function(b){var g,c;if(!(b instanceof Array)){g=$A(arguments);}else g=b;for(var h=0;h<g.length;++h)if(typeof g[h]=='string'){c=Dialog._findButton(Dialog._STANDARD_BUTTONS,g[h]);g[h]=c;}this._buttons=g;var d=[];if(g&&g.length>0)for(var i=0;i<g.length;i++){c=g[i];var e=$N('input',{type:'button',name:c.name||'',value:c.label});var f=$N('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},e);if(c.className){c.className.split(/\s+/).each(function(j){CSS.addClass(f,j);});if(CSS.hasClass(f,'inputaux')){CSS.removeClass(f,'inputaux');CSS.removeClass(f,'uiButtonConfirm');}if(CSS.hasClass(f,'uiButtonSpecial'))CSS.removeClass(f,'uiButtonConfirm');}if(c.icon)DOM.prependContent(f,$N('img',{src:c.icon,className:'img mrs'}));if(c.disabled)Button.setEnabled(f,false);Event.listen(e,'click',this._handleButton.bind(this,c.name));for(var a in c)if(a.indexOf('data-')===0&&a.length>5)e.setAttribute(a,c[a]);d.push(f);}DOM.setContent(this._nodes.buttons,d);this._updateButtonVisibility();return this;},setButtonsMessage:function(a){DOM.setContent(this._nodes.button_message,this._format(a||''));this._has_button_message=!!a;this._updateButtonVisibility();return this;},_updateButtonVisibility:function(){var a=this._buttons.length>0||this._has_button_message;CSS.conditionShow(this._nodes.button_wrapper,a);CSS.conditionClass(this._obj,'omitDialogFooter',!a);},setClickButtonOnEnter:function(c,a){var b=ge(c);if(b)this._clickOnEnterListener=Event.listen(b,'keypress',function(event){if(Event.getKeyCode(event)==KEYS.RETURN){this._handleButton(a);event.kill();}return true;}.bind(this));return this;},setStackable:function(b,a){this._is_stackable=b;this._shown_while_stacked=b&&a;return this;},setHandler:function(a){this._handler=a;return this;},setCancelHandler:function(a){this._cancelHandler=Dialog.call_or_eval.bind(null,this,a);return this;},setCloseHandler:function(a){this._close_handler=Dialog.call_or_eval.bind(null,this,a);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(b,a){if(a===undefined)a=true;if(a){this.setHandler(this._submitForm.bind(this,'POST',b));}else this.setHandler(function(){Form.post(b,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(a){this.setHandler(this._submitForm.bind(this,'GET',a));return this;},setModal:function(a){this._modal=a;return this;},setSemiModal:function(a){if(a)this.setModal(true);this._semi_modal=a;return this;},setWideDialog:function(a){this._wide_dialog=a;this._updateWidth();return this;},setContentWidth:function(a){this._content_width=a;this._updateWidth();return this;},setTitleLoading:function(b){if(b===undefined)b=true;var a=DOM.find(this._popup,'h2.dialog_title');if(a)CSS.conditionClass(a,'loading',b);return this;},setSecure:function(a){CSS.conditionClass(this._nodes.title,'secure',a);return this;},setClassName:function(a){CSS.addClass(this._obj,a);return this;},setFadeEnabled:function(a){this._fade_enabled=a;return this;},setFooter:function(a){var b=this._nodes.footer;DOM.setContent(b,this._format(a||''));CSS.conditionShow(b,!!a);return this;},setAutoFocus:function(a){this._auto_focus=a;return this;},setTop:function(a){this._top=a;this._resetDialogObj();return this;},setFixed:function(a){this._fixed=a;this._resetDialogObj();return this;},onloadRegister:function(a){$A(a).forEach(function(b){if(typeof b=='string')b=new Function(b);this._onload_handlers.push(b.bind(this));}.bind(this));return this;},setAsyncURL:function(a){return this.setAsync(new AsyncRequest(a));},setAsync:function(a,i){var d=function(m){if(this._async_request!=a)return;this._async_request=null;var l=m.getPayload();var j=l;var k=function(){if(this._loading)this._showing=true;if(typeof j=='string'){this.setBody(j);}else this._setFromModel(j);this._update();}.bind(this);if(i){j=l.dialog;Bootloader.setResourceMap(l.resource_map);Bootloader.loadResources(l.css,k);}else k();}.bind(this);var b=a.getData();b.__d=1;a.setData(b);var h;if(i){a.setFirstResponseHandler(d);h=a.getAsyncRequest();}else{var f=a.getHandler()||bagofholding;a.setHandler(function(j){f(j);d(j);});h=a;}var e=h.getErrorHandler()||bagofholding;var g=h.getTransportErrorHandler()||bagofholding;var c=function(){this._async_request=null;if(this._showing){this._update();}else this._hide();}.bind(this);h.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(j){c();e(j);}).setTransportErrorHandler(function(j){c();g(j);});a.send();this._async_request=a;this._update();return this;},_format:function(a){if(typeof a=='string'){a=HTML(a);}else a=HTML.replaceJSONWrapper(a);if(a instanceof HTML)a.setDeferred(true);return a;},_update:function(){if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(bind(this,'hide'),this._autohide);if(this._async_request&&this._show_loading){this.showLoading();}else{CSS.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;Input.focus(this._frame);}},_runOnloads:function(){for(var b=0;b<this._onload_handlers.length;++b)try{this._onload_handlers[b]();}catch(a){}this._onload_handlers=[];},_updateWidth:function(){var a=2*Dialog._BORDER_WIDTH;if(Dialog._useCSSBorders)a+=2*Dialog._HALO_WIDTH;if(this._content_width){a+=this._content_width;if(!this._full_bleed)a+=2*Dialog._PADDING_WIDTH;}else if(this._wide_dialog){a+=Dialog.SIZE.WIDE;}else a+=Dialog.SIZE.STANDARD;this._popup.style.width=a+'px';},_renderDialog:function(){this._showDialog();this._submit_on_enter=false;if(this._auto_focus){var b=Form.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(b){Form.focusFirst.bind(this,this._content).defer();}else this._submit_on_enter=true;}var a=Vector2.getElementDimensions(this._content).y+Vector2.getElementPosition(this._content).y;Dialog._bottoms.push(a);this._bottom=a;Dialog._updateMaxBottom();return this;},_buildDialog:function(){this._obj=$N('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';document.body.appendChild(this._obj);if(!this._popup)this._popup=$N('div',{className:'generic_dialog_popup'});this._popup.style.left=this._popup.style.top='';this._obj.appendChild(this._popup);if(ua.ie()<7&&!this._shim)Bootloader.loadComponents('iframe-shim',function(){this._shim=new IframeShim(this._popup);});this._buildDialogContainer();this._buildDialogContent();},_showDialog:function(){if(this._modal){this._buildOverlay();}else if(this._overlay){DOM.remove(this._overlay);this._overlay=null;}if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);var c=Dialog._stack;if(!c.length)Arbiter.inform('layer_shown',{type:'Dialog'});c.remove(this);c.push(this);for(var a=c.length-2;a>=0;a--){var b=c[a];if(!b._is_stackable&&!b._async_request){b._hide();}else if(!b._shown_while_stacked)b._hide(true);}return this;},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this._updateShim();}},_buildDialogContainer:function(){CSS.addClass(this._obj,'pop_dialog');if(intl_locale_is_rtl())CSS.addClass(this._obj,'pop_dialog_rtl');var b;if(Dialog._useCSSBorders){b='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else b='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';DOM.setContent(this._popup,HTML(b));var a=DOM.find(this._popup,'div.pop_content');a.setAttribute('tabIndex','0');a.setAttribute('role','alertdialog');this._frame=this._content=a;},_buildDialogContent:function(){var g=$N('div',{className:'dialog_loading'},_tx("Loading..."));var j=$N('span');var i=$N('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},j);var h=$N('div',{className:'dialog_summary hidden_elem'});var a=$N('div',{className:'dialog_body'});var d=$N('div');var b=$N('div',{className:'dialog_buttons_msg'});var c=$N('div',{className:'dialog_buttons clearfix hidden_elem'},[b,d]);var f=$N('div',{className:'dialog_footer hidden_elem'});var e=$N('div',{className:'dialog_content'},[h,a,c,f]);this._nodes={summary:h,body:a,buttons:d,button_message:b,button_wrapper:c,footer:f,content:e,title:i,title_inner:j};DOM.setContent(this._frame,[i,e,g]);},_buildOverlay:function(){if(this._overlay)return;this._overlay=$N('div',{className:'overlay'});if(this._semi_modal)Event.listen(this._obj,'click',function(a){if(!DOM.contains(this._popup,a.getTarget()))this.hide();}.bind(this));if(ua.ie()<7)this._overlay.style.height=Vector2.getDocumentDimensions().y+'px';this._obj.insertBefore(this._overlay,this._obj.firstChild);},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var a=DOM.find(this._popup,'div.pop_content');var b=Vector2.getElementDimensions(a).y+(2*Dialog._HALO_WIDTH);var g=Vector2.getViewportDimensions().y-(2*Dialog._PAGE_MARGIN);var f=this._top;var e=Vector2.getScrollPosition().y;var c=g-b;if(c<0){f=Dialog._PAGE_MARGIN;}else if(f>c)f=Dialog._PAGE_MARGIN+(Math.max(c,0)/2);if(!this._fixed)f+=e;CSS.conditionClass(this._obj,'generic_dialog_fixed',this._fixed);var d=this._fixed&&c<0;CSS.conditionClass(this._obj,'generic_dialog_fixed_overflow',d);CSS.conditionClass(document.body,'generic_dialog_overflow_mode',d);CSS.setStyle(this._popup,'top',f+'px');if(this._fixed&&f-Vector2.getElementPosition(this._popup,'viewport').y>1){f+=e;CSS.setStyle(this._popup,'top',f+'px');}},_fadeOut:function(b){if(!this._popup)return;try{animation(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,b)).go();}catch(a){this._hide(b);}},_hide:function(d){if(this._obj)this._obj.style.display='none';this._updateShim();if(this.timeout){clearTimeout(this.timeout);this.timeout=null;}if(this._hidden_objects.length){for(var b=0,c=this._hidden_objects.length;b<c;b++)this._hidden_objects[b].style.visibility='';this._hidden_objects=[];}clearInterval(this.active_hiding);if(this._bottom){var a=Dialog._bottoms;a.splice(a.indexOf(this._bottom),1);Dialog._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&DOM.contains(this._obj,document.activeElement))Input.focus(this._previous_focus);if(d)return;this.destroy();},destroy:function(){var a=Dialog._stack;var b=(a[a.length-1]===this);a.remove(this);if(a.length){if(b)a[a.length-1]._showDialog();}else Arbiter.inform('layer_hidden',{type:'Dialog'});if(this._obj){DOM.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(a){if(typeof a=='string')a=Dialog._findButton(this._buttons,a);var b=Dialog.call_or_eval(a,a.handler);if(b===false)return;if(a.name=='cancel'){this.cancel();}else if(Dialog.call_or_eval(this,this._handler,{button:a})!==false)this.hide();},_submitForm:function(d,e,b){var c=this.getFormData();if(b)c[b.name]=b.label;if(this._extra_data)copy_properties(c,this._extra_data);var a=new AsyncRequest().setURI(e).setData(c).setMethod(d).setNectarModuleDataSafe(this._causal_elem).setReadOnly(d=='GET');this.setAsync(a);return false;},_setFromModel:function(c){var a={};copy_properties(a,c);for(var d in a){if(d=='onloadRegister'){this.onloadRegister(a[d]);continue;}var b=this['set'+d.substr(0,1).toUpperCase()+d.substr(1)];b.apply(this,$A(a[d]));}},_updateBottom:function(){var a=Vector2.getElementDimensions(this._content).y+Vector2.getElementPosition(this._content).y;Dialog._bottoms[Dialog._bottoms.length-1]=a;Dialog._updateMaxBottom();}});
__d("async",[],function(global,module,require,exports){function AsyncRequest(uri){var dispatchResponse=bind(this,function(asyncResponse){try{this.clearStatusIndicator();if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);asyncResponse.jscc&&invoke_callbacks([asyncResponse.jscc]);if(this.handler)try{var suppress_onload=this.handler(asyncResponse);}catch(exception){asyncResponse.is_last&&this.finallyHandler(asyncResponse);throw exception;}if(suppress_onload!==AsyncRequest.suppressOnloadToken){var onload=asyncResponse.onload;if(onload)for(var ii=0;ii<onload.length;ii++)try{(new Function(onload[ii])).apply(this);}catch(exception){}if(this.lid)Arbiter.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},Arbiter.BEHAVIOR_EVENT);var onafterload=asyncResponse.onafterload;if(onafterload)for(var ii=0;ii<onafterload.length;ii++)try{(new Function(onafterload[ii])).apply(this);}catch(exception){}}asyncResponse.is_last&&this.finallyHandler(asyncResponse);}}catch(exception){}});var dispatchErrorResponse=bind(this,function(asyncResponse,isTransport){try{this.clearStatusIndicator();var async_error=asyncResponse.getError();if(this._sendTimeStamp){var _duration=(+new Date())-this._sendTimeStamp;var xfb_ip=this._xFbServer||'-';asyncResponse.logError('async_error',{duration:_duration,xfb_ip:xfb_ip});}else asyncResponse.logError('async_error');if((!this.isRelevant())||async_error===1010)return;if(async_error==1357008||async_error==1357007||async_error==1442002||async_error==1357001){var is_confirmation=false;if(async_error==1357008||async_error==1357007)is_confirmation=true;var payload=asyncResponse.getPayload();this._displayServerDialog(payload.__dialog,is_confirmation);}else if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);try{if(isTransport){this.transportErrorHandler(asyncResponse);}else this.errorHandler(asyncResponse);}catch(exception){this.finallyHandler(asyncResponse);throw exception;}this.finallyHandler(asyncResponse);}}catch(exception){}});var _interpretTransportResponse=bind(this,function(){if(this.getOption('suppressEvaluation')){var r=new AsyncResponse(this,this.transport);return {asyncResponse:r};}var _sendError=function(p,error_code,str){if(!window.send_error_signal)return;if(this._xFbServer){error_code='1008_'+error_code;}else error_code='1012_'+error_code;send_error_signal('async_xport_resp',error_code+':'+(this._xFbServer||'-')+':'+p.getURI()+':'+str.length+':'+str.substr(0,1600));};var shield="for (;;);";var shieldlen=shield.length;var text=this.transport.responseText;if(text.length<=shieldlen){_sendError(this,'empty',text);return {transportError:'Response too short on async to '+this.getURI()};}var offset=0;while(text.charAt(offset)==" "||text.charAt(offset)=="\n")offset++;offset&&text.substring(offset,offset+shieldlen)==shield;var safeResponse=text.substring(offset+shieldlen);try{var response=eval('('+safeResponse+')');}catch(exception){_sendError(this,'excep',text);return {transportError:'eval() failed on async to '+this.getURI()};}return interpretResponse(response);});var interpretResponse=bind(this,function(response){if(response.redirect)return {redirect:response.redirect};var r=new AsyncResponse(this);if(response.__ar!=1){r.payload=response;}else{copy_properties(r,response);if(response.tplts)if(window.DynaTemplate)DynaTemplate.registerTemplates(response.tplts);}return {asyncResponse:r};});var invokeResponseHandler=bind(this,function(interp){if(typeof(interp.redirect)!='undefined'){(function(){this.setURI(interp.redirect).send();}).bind(this).defer();return;}if(this.handler||this.errorHandler||this.transportErrorHandler)if(typeof(interp.asyncResponse)!='undefined'){var r=interp.asyncResponse;if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(r.inlinejs)eval_global(r.inlinejs);if(r.lid){this._responseTime=(+new Date());if(window.CavalryLogger)this.cavalry=CavalryLogger.getInstance(r.lid);this.lid=r.lid;}if(r.getError()&&!r.getErrorIsWarning()){var fn=dispatchErrorResponse;}else var fn=dispatchResponse;Bootloader.setResourceMap(r.resource_map);if(r.bootloadable)Bootloader.enableBootload(r.bootloadable);fn=fn.shield(null,r);fn=fn.defer.bind(fn);var is_transitional=false;if(this.preBootloadHandler)is_transitional=this.preBootloadHandler(r);r.css=r.css||[];r.js=r.js||[];Bootloader.loadResources(r.css.concat(r.js),fn,is_transitional,this.getURI());}else if(typeof(interp.transportError)!='undefined'){if(this._xFbServer){invokeErrorHandler(1008);}else invokeErrorHandler(1012);}else invokeErrorHandler(1007);});var invokeErrorHandler=bind(this,function(explicitError){try{if(!window.loaded&&!this.getOption('handleErrorAfterUnload'))return;}catch(ex){return;}var r=new AsyncResponse(this);var err;try{err=explicitError||this.transport.status||1004;}catch(ex){err=1005;}if(this._requestAborted)err=1011;try{if(this.responseText=='')err=1002;}catch(ignore){}if(this.transportErrorHandler){var desc,summary;var silent=true;if(false===navigator.onLine){summary=_tx("No Network Connection");desc=_tx("Your browser appears to be offline. Please check your internet connection and try again.");err=1006;}else if(err>=300&&err<=399){summary=_tx("Redirection");desc=_tx("Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ");redir_url=this.transport.getResponseHeader("Location");if(redir_url)goURI(redir_url,true);silent=true;}else{summary=_tx("Oops!");desc=_tx("Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.");}!this.getOption('suppressErrorAlerts');copy_properties(r,{error:err,errorSummary:summary,errorDescription:desc,silentError:silent});dispatchErrorResponse(r,true);}});var handleResponse=function(response){var asyncResponse=this.interpretResponse(response);this.invokeResponseHandler(asyncResponse);};var onStateChange=function(){try{if(this.transport.readyState==4){AsyncRequest._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!='undefined'&&this.transport.getResponseHeader('X-FB-Server'))this._xFbServer=this.transport.getResponseHeader('X-FB-Server');}catch(ex){}if(this.transport.status>=200&&this.transport.status<300){invokeResponseHandler(_interpretTransportResponse());}else if(ua.safari()&&(typeof(this.transport.status)=='undefined')){invokeErrorHandler(1002);}else if(window.Env&&window.Env.retry_ajax_on_network_error&&this.transport.status in {0:1,12029:1,12030:1,12031:1,12152:1}&&this.remainingRetries>0){--this.remainingRetries;delete this.transport;this.send(true);return;}else invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(exception){try{if(!window.loaded)return;}catch(ex){return;}delete this.transport;if(this.remainingRetries>0){--this.remainingRetries;this.send(true);}else{!this.getOption('suppressErrorAlerts');if(window.send_error_signal)send_error_signal('async_xport_resp','1007:'+(this._xFbServer||'-')+':'+this.getURI()+':'+exception.message);invokeErrorHandler(1007);}}};var onJSONPResponse=function(data,more_chunked_response){var is_first=(this.is_first===undefined);this.is_first=is_first;if(this.transportIframe&&!more_chunked_response){if(this.cavalry)this.cavalry.collectBrowserTiming(this.transportIframe.contentWindow);(function(x){document.body.removeChild(x);}).bind(null,this.transportIframe).defer();}if(ua.ie()>=9&&window.JSON)data=window.JSON.parse(window.JSON.stringify(data));var r=this.interpretResponse(data);r.asyncResponse.is_first=is_first;r.asyncResponse.is_last=!more_chunked_response;this.invokeResponseHandler(r);return more_chunked_response;};copy_properties(this,{onstatechange:onStateChange,onjsonpresponse:onJSONPResponse,invokeResponseHandler:invokeResponseHandler,interpretResponse:interpretResponse,handleResponse:handleResponse,transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,finallyHandler:bagofholding,serverDialogCancelHandler:bagofholding,relativeTo:null,statusElement:null,statusClass:'',data:{},context:{},readOnly:false,writeRequiredParams:['post_form_id'],remainingRetries:0,option:{asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,tfbEndpoint:true,handleErrorAfterUnload:false},userActionID:'-'});this.errorHandler=AsyncResponse.defaultErrorHandler;this.transportErrorHandler=bind(this,'errorHandler');if(uri!=undefined)this.setURI(uri);return this;}Arbiter.subscribe("page_transition",function(type,message){AsyncRequest._id_threshold=message.id;});copy_properties(AsyncRequest,{receiveJSONPResponse:function(id,data,more_chunked_response){if(this._JSONPReceivers[id]){if(!this._JSONPReceivers[id](data,more_chunked_response))delete this._JSONPReceivers[id];}else if(window.send_error_signal&&!more_chunked_response){var uri=(data.payload&&data.payload.uri)||'';send_error_signal('js_timeout_and_exception','00002:WrongSessionID:error:'+id+':'+uri);}},_bundleRequest:function(request){if(request.getOption('jsonp')||request.getOption('useIframeTransport')){request.setOption('bundle',false);return false;}else if(!request.uri.isFacebookURI()){request.setOption('bundle',false);return false;}else if(!request.getOption('asynchronous')){request.setOption('bundle',false);return false;}var path=request.uri.getPath();if(!AsyncRequest._bundleTimer)AsyncRequest._bundleTimer=setTimeout(function(){AsyncRequest._sendBundledRequests();},0);AsyncRequest._allBundledRequests.push([path,request]);return true;},_sendBundledRequests:function(){clearTimeout(AsyncRequest._bundleTimer);AsyncRequest._bundleTimer=null;var bundled_requests=AsyncRequest._allBundledRequests;AsyncRequest._allBundledRequests=[];if(bundled_requests.length==1){var request=bundled_requests[0][1];request.setOption('bundle',false).send();return request;}if(bundled_requests.length===0)return null;var data=[];for(var ii=0;ii<bundled_requests.length;ii++)data.push([bundled_requests[ii][0],URI.implodeQuery(bundled_requests[ii][1].data)]);var query_data={data:data};var request=new AsyncRequest();request.setURI('/ajax/proxy.php').setData(query_data).setMethod('POST').setInitialHandler(bagof(true)).setAllowCrossPageTransition(true).setHandler(function(r){var payload=r.getPayload();var responses=payload.responses;if(responses.length!=bundled_requests.length){return;}else for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];request.id=this.id;if(responses[ii][0]!=path){request.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+path});continue;}var asyncResponse=request.interpretResponse(responses[ii][1]);request.invokeResponseHandler(asyncResponse);}}).setTransportErrorHandler(function(response){var paths=[];var interp={transportError:response.errorDescription};for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];paths.push(path);request.id=this.id;request.invokeResponseHandler(interp);}}).send();return request;},bootstrap:function(href,elem,is_post){var method='GET';var readonly=true;var data={};if(is_post||elem&&(elem.rel=='async-post'||elem.getAttribute&&elem.getAttribute('forcemethod')=='post')){method='POST';readonly=false;if(href){href=URI(href);data=href.getQueryData();href.setQueryData({});}}var status_elem=Parent.byClass(elem,'stat_elem')||elem;if(status_elem&&CSS.hasClass(status_elem,'async_saving'))return false;var async=new AsyncRequest(href).setReadOnly(readonly).setMethod(method).setData(data).setNectarModuleDataSafe(elem).setRelativeTo(elem);if(status_elem){async.setStatusElement(status_elem);var status_class=status_elem.getAttribute('data-status-class');status_class&&async.setStatusClass(status_class);}async.send();return false;},post:function(href,data){new AsyncRequest(href).setReadOnly(false).setMethod('POST').setData(data).send();return false;},getLastId:function(){return AsyncRequest._last_id;},_JSONPReceivers:{},_allBundledRequests:[],_bundleTimer:null,suppressOnloadToken:{},_last_id:2,_id_threshold:2,_inflight:[],_inflightAdd:bagofholding,_inflightPurge:bagofholding,_inflightEnable:function(){if(ua.ie()){copy_properties(AsyncRequest,{_inflightAdd:function(ar){this._inflight.push(ar);},_inflightPurge:function(){AsyncRequest._inflight=AsyncRequest._inflight.filter(function(ar){return ar.transport&&ar.transport.readyState<4;});}});onunloadRegister(function(){AsyncRequest._inflight.each(function(ar){if(ar.transport&&ar.transport.readyState<4){ar.transport.abort();delete ar.transport;}});});}}});copy_properties(AsyncRequest.prototype,{setMethod:function(m){this.method=m.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(obj){this.data=obj;return this;},getData:function(){return this.data;},setContextData:function(key,value,enabled){enabled=enabled===undefined?true:enabled;if(enabled)this.context['_log_'+key]=value;return this;},_setUserActionID:function(){var ue=window.ArbiterMonitor&&ArbiterMonitor.getUE()||'-';this.userActionID=(window.EagleEye&&EagleEye.getSessionID()||'-')+'/'+ue;},setURI:function(uri){var uri_obj=URI(uri);if(this.getOption('useIframeTransport')&&!uri_obj.isFacebookURI())return this;if(!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!uri_obj.isSameOrigin())return this;this._setUserActionID();if(!uri||uri_obj.isEmpty()){if(window.send_error_signal&&window.get_error_stack){var data={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};send_error_signal('async_error',JSON.stringify(data));send_error_signal('async_xport_stack','1013:'+window.location.href+'::'+get_error_stack());}return this;}this.uri=uri_obj;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(fn){this.initialHandler=fn;return this;},setHandler:function(fn){if(!(typeof(fn)!='function'))this.handler=fn;return this;},getHandler:function(){return this.handler;},setErrorHandler:function(fn){if(!(typeof(fn)!='function'))this.errorHandler=fn;return this;},setTransportErrorHandler:function(fn){this.transportErrorHandler=fn;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(timeout,fn){if(!(typeof(fn)!='function')){this.timeout=timeout;this.timeoutHandler=fn;}return this;},resetTimeout:function(timeout){if(!(this.timeoutHandler===null))if(timeout===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var clear_on_quickling_event=!this._allowCrossPageTransition;this.timeout=timeout;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,clear_on_quickling_event);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++AsyncRequest._last_id;return this;},setFinallyHandler:function(fn){this.finallyHandler=fn;return this;},setServerDialogCancelHandler:function(fn){this.serverDialogCancelHandler=fn;return this;},setPreBootloadHandler:function(fn){this.preBootloadHandler=fn;return this;},setReadOnly:function(readOnly){if(!(typeof(readOnly)!='boolean'))this.readOnly=readOnly;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(element){this.relativeTo=element;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(c){this.statusClass=c;return this;},setStatusElement:function(element){this.statusElement=element;return this;},getStatusElement:function(){return ge(this.statusElement);},isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>AsyncRequest._id_threshold;},clearStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.removeClass(statusElem,'async_saving');CSS.removeClass(statusElem,this.statusClass);}},addStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.addClass(statusElem,'async_saving');CSS.addClass(statusElem,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(param){this.data[param]=this.data[param]||Env[param]||(ge(param)||{}).value;if(this.data[param]!==undefined)return true;return false;},this);},setOption:function(opt,v){if(typeof(this.option[opt])!='undefined')this.option[opt]=v;return this;},getOption:function(opt){typeof(this.option[opt])=='undefined';return this.option[opt];},abort:function(){if(this.transport){var old_handler=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=1;this.transport.abort();this.setTransportErrorHandler(old_handler);}},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=1;this.transport.abort();}},setNectarData:function(nctrParams){if(nctrParams){if(this.data.nctr===undefined)this.data.nctr={};copy_properties(this.data.nctr,nctrParams);}return this;},setNectarModuleDataSafe:function(elem){if(this.setNectarModuleData)this.setNectarModuleData(elem);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(allow){this._allowCrossPageTransition=!!allow;if(this.timer)this.resetTimeout(this.timeout);return this;},send:function(isRetry){isRetry=isRetry||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}if(this.method=='POST'&&this.getOption('tfbEndpoint')){this.data.fb_dtsg=Env.fb_dtsg;this.data.lsd=getCookie('lsd');}if(!is_empty(this.context)&&this.getOption('tfbEndpoint')){copy_properties(this.data,this.context);this.data.ajax_log=1;}if(window.Env&&Env.force_param)copy_properties(this.data,Env.force_param);if(!this.getReadOnly()&&this.getOption('tfbEndpoint')&&this.method=='POST'&&this.data.post_form_id_source===undefined)this.data.post_form_id_source='AsyncRequest';if(window.Env)this.data.__user=Env.user;this._setUserActionID();if(this.getOption('bundle')&&AsyncRequest._bundleRequest(this))return true;this.setNewSerial();if(this.getOption('tfbEndpoint')){this.uri.addQueryData({__a:1});if(Env.fb_isb)this.uri.addQueryData({fb_isb:Env.fb_isb});}this.finallyHandler=async_callback(this.finallyHandler,'final');var uri_str,query;if(this.method=='GET'){uri_str=this.uri.addQueryData(this.data).toString();query='';}else{uri_str=this.uri.toString();query=URI.implodeQuery(this.data);}if(this.getOption('jsonp')||this.getOption('useIframeTransport')){uri_str=this.uri.addQueryData({__a:this.id}).toString();AsyncRequest._JSONPReceivers[this.id]=async_callback(bind(this,'onjsonpresponse'),'json');if(this.getOption('jsonp')){(function(){document.body.appendChild($N('script',{src:uri_str,type:"text/javascript"}));}).bind(this).defer();}else{var style={position:'absolute',top:'-9999999px',width:'80px',height:'80px'};this.transportIframe=$N('iframe',{src:"javascript:''",style:style});document.body.appendChild(this.transportIframe);this.transportIframe.src=uri_str;}return true;}if(this.transport)return false;var transport=null;try{transport=new XMLHttpRequest();}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Msxml2.XMLHTTP");}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Microsoft.XMLHTTP");}catch(ignored){}if(!transport)return false;transport.onreadystatechange=async_callback(bind(this,'onstatechange'),'xhr');if(!isRetry)this.remainingRetries=this.getOption('retries');if(window.send_error_signal||window.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||(+new Date());this.transport=transport;try{this.transport.open(this.method,uri_str,this.getOption('asynchronous'));}catch(ex){return false;}var svn_rev=env_get('svn_rev');if(svn_rev)this.transport.setRequestHeader('X-SVN-Rev',String(svn_rev));if(this.method=='POST')this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();this.transport.send(query);if(this.timeout!==null)this.resetTimeout(this.timeout);AsyncRequest._inflightAdd(this);return true;},_displayServerDialog:function(model,is_confirmation){var dialog=new Dialog(model);if(is_confirmation)dialog.setHandler(this._displayConfirmationHandler.bind(this,dialog));dialog.setCancelHandler(function(){this.serverDialogCancelHandler.apply(this,arguments);this.finallyHandler.apply(this,arguments);}.bind(this)).setCloseHandler(this.finallyHandler.bind(this)).show();},_displayConfirmationHandler:function(dialog){this.data.confirmed=1;copy_properties(this.data,dialog.getFormData());this.send();}});function AsyncResponse(request,payload){copy_properties(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:payload||null,request:request||null,silentError:false,is_last:true});return this;}copy_properties(AsyncResponse,{defaultErrorHandler:function(response){try{if(!response.silentError){AsyncResponse.verboseErrorHandler(response);}else response.logErrorByGroup('silent',10);}catch(ex){alert(response);}},verboseErrorHandler:function(response){try{var summary=response.getErrorSummary();var desc=response.getErrorDescription();response.logErrorByGroup('popup',10);if(response.silentError&&desc=='')desc=_tx("Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.");ErrorDialog.show(summary,desc);}catch(ex){alert(response);}}});copy_properties(AsyncResponse.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(summary){summary=(summary===undefined?null:summary);this.errorSummary=summary;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(category,extra){if(window.send_error_signal){var data={err_code:this.error,vip:(env_get('vip')||'-')};if(extra!==undefined){data.duration=extra.duration;data.xfb_ip=extra.xfb_ip;}var path=this.request.getURI();data.path=path||'-';data.aid=this.request.userActionID;if(path&&path.indexOf('scribe_endpoint.php')!=-1)category='async_error_double';send_error_signal(category,JSON.stringify(data));}},logErrorByGroup:function(suffix,log_rate){if(Math.floor(Math.random()*log_rate)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+suffix);}else this.logError('async_error_logic_'+suffix);}});global.AsyncRequest=module.exports=AsyncRequest;global.AsyncResponse=AsyncResponse;},3);
InitialJSLoader={INITIAL_JS_READY:'BOOTLOAD/JSREADY',load:function(a){InitialJSLoader.callback=Bootloader.loadResources(a,InitialJSLoader.callback);},callback:Arbiter.registerCallback(function(){Arbiter.inform(InitialJSLoader.INITIAL_JS_READY,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK])};
window.onloadRegister=function(a){window.loaded?_runHook(a):_addHook('onloadhooks',a);};function onafterloadRegister(a){window.afterloaded?setTimeout(function(){_runHook(a);},0):_addHook('onafterloadhooks',a);}function _onloadHook(){!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_prehooks');_runHooks('onloadhooks');!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_hooks');window.loaded=true;Arbiter.inform('uipage_onload',true,Arbiter.BEHAVIOR_STATE);}function _onafterloadHook(){_runHooks('onafterloadhooks');window.afterloaded=true;}function _runHook(b){try{return b();}catch(a){}}function _runHooks(b){var d=b=='onbeforeleavehooks'||b=='onbeforeunloadhooks';var e=null;do{var a=window[b];if(!d)window[b]=null;if(!a)break;for(var c=0;c<a.length;c++)if(d){e=e||_runHook(a[c]);}else _runHook(a[c]);if(d)break;}while(window[b]);if(d&&e)return e;}function keep_window_set_as_loaded(){if(window.loaded==false){window.loaded=true;_runHooks('onloadhooks');}if(window.afterloaded==false){window.afterloaded=true;_runHooks('onafterloadhooks');}}Arbiter.registerCallback(_onloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.registerCallback(_onafterloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,OnloadEvent.ONLOAD_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.subscribe(OnloadEvent.ONBEFOREUNLOAD,function(b,a){a.warn=_runHooks('onbeforeleavehooks')||_runHooks('onbeforeunloadhooks');if(!a.warn){window.loaded=false;window.afterloaded=false;}},Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe(OnloadEvent.ONUNLOAD,function(b,a){_runHooks('onunloadhooks');},Arbiter.SUBSCRIBE_NEW);
__d("string-extensions",[],function(b,c,d,a){String.prototype.trim=function(){if(this==window)return null;return this.replace(/^\s*|\s*$/g,'');};a.trim=b.trim=function(f){try{return String(f.toString()).trim();}catch(e){return '';}};String.prototype.startsWith=function(e){if(this==window)return null;return this.substring(0,e.length)==e;};String.prototype.endsWith=function(e){if(this==window)return null;return this.length>=e.length&&this.substring(this.length-e.length)==e;};String.prototype.split=(function(e){return function(l,i){var f="";if(l===null||i===null){return [];}else if(typeof l=='string'){return e.call(this,l,i);}else if(l===undefined){return [this.toString()];}else if(l instanceof RegExp){if(!l._2||!l._1){f=l.toString().replace(/^[\S\s]+\//,"");if(!l._1)if(!l.global){l._1=new RegExp(l.source,"g"+f);}else l._1=1;}separator1=l._1===1?l:l._1;var m=(l._2?l._2:l._2=new RegExp("^"+separator1.source+"$",f));if(i===undefined||i<0){i=false;}else{i=Math.floor(i);if(!i)return [];}var j,k=[],h=0,g=0;while((i?g++<=i:true)&&(j=separator1.exec(this))){if((j[0].length===0)&&(separator1.lastIndex>j.index))separator1.lastIndex--;if(separator1.lastIndex>h){if(j.length>1)j[0].replace(m,function(){for(var n=1;n<arguments.length-2;n++)if(arguments[n]===undefined)j[n]=undefined;});k=k.concat(this.substring(h,j.index),(j.index===this.length?[]:j.slice(1)));h=separator1.lastIndex;}if(j[0].length===0)separator1.lastIndex++;}return (h===this.length)?(separator1.test("")?k:k.concat("")):(i?k:k.concat(this.substring(h)));}else return e.call(this,l,i);};})(String.prototype.split);},3);
onloadRegister(function(){copy_properties(AsyncRequest.prototype,{setNectarModuleData:function(c){if(this.method=='POST'){var d=Env.module;if(c&&d===undefined){var b={fbpage_fan_confirm:1};var e=null;for(var a=c;a&&a!=document.body;a=a.parentNode){if(!a.id||typeof a.id!=='string')continue;if(a.id.startsWith('pagelet_')){d=a.id;break;}if(!e&&b[a.id])e=a.id;}if(d===undefined&&e)d=e;}if(d!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._mod=d;}}},setNectarImpressionId:function(){if(this.method=='POST'){var a=env_get('impid');if(a!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._impid=a;}}}});});
(function(){function a(e,g,c,b){var f;var d=function(){var h=arguments;var i=this;var j=function(){f=null;e.apply(i,h);};c&&d.reset();if(c||!f)f=setTimeout(j,g,b);};d.reset=function(){f&&clearTimeout(f);f=null;};return d;}window.debounce=function(c,d,b){return a(c,d,true,b);};window.throttle=function(c,d,b){return a(c,d,false,b);};})();function defer_until(c,b,g,a,h){var e=b();if(e){c(e);return null;}var f=new Date().getTime();var d=setInterval(function(){e=b();if(!e){if(!g||(g<new Date()-f))return;h&&h();}clearInterval(d);c(e);},20,a);return d;}
var XD={_callbacks:[],_opts:{autoResize:false,allowShrink:true,channelUrl:null,hideOverflow:false,newResizeMethod:false,resizeTimeout:100,resizeWidth:false,expectResizeAck:false,resizeAckTimeout:6000},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,init:function(a){this._opts=copy_properties(copy_properties({},this._opts),a);if(this._opts.autoResize)this._startResizeMonitor();Arbiter.subscribe('Connect.Unsafe.resize.ack',function(c,b){if(!b.id)b.id=this._resizeCount;if(b.id>this._lastResizeAckId)this._lastResizeAckId=b.id;}.bind(this));},send:function(b,a){a=a||this._opts.channelUrl;if(!a)return;if(a.substr(0,4)!='http')return;var i=a+'&'+URI.implodeQuery(b),e='f'+(Math.random()*(1<<30)).toString(16).replace('.',''),c=document.body.appendChild(document.createElement('div')),h=false;c.style.position='absolute';c.style.top='-10000px';c.style.width='1px';c.style.height='1px';XD._callbacks[e]=function(){if(h){(function(){c.parentNode.removeChild(c);}).defer(3000);delete XD._callbacks[e];}};if(ua.ie()){var f,d=document.createElement('div');f='<iframe onload="XD._callbacks.'+e+'()"></iframe>';d.innerHTML=f;d.firstChild.setAttribute('src',i);f=d.innerHTML;c.innerHTML='<iframe src="javascript:false"></iframe>';h=true;(function(){c.innerHTML=f;}).defer();}else{var g=document.createElement('iframe');g.onload=XD._callbacks[e];c.appendChild(g);h=true;g.src=i;}},_computeSize:function(){return {width:this._opts.resizeWidth?this._calcWidth(XD.forced_min_width):0,height:this._calcHeight(this._opts.newResizeMethod)};},_calcHeight:function(d){var a=document.body,b=document.documentElement,c=0;if(d){c=Math.max(Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop,Math.max(b.offsetHeight,b.scrollHeight)+b.offsetTop);}else{if(ua.ie()){c=Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop;}else c=b.offsetHeight+b.offsetTop;if(window.Dialog)c=Math.max(c,Dialog.max_bottom);}return c;},_calcWidth:function(g){var a=document.body,e=document.documentElement,h=0;if(a.offsetWidth<a.scrollWidth){h=a.scrollWidth+a.offsetLeft;}else{var d=a.childNodes;for(var f=0;f<d.length;f++){var b=d[f];var c=b.offsetWidth+b.offsetLeft;if(c>h)h=c;}}if(g)h=Math.max(h,g);if(e.clientLeft>0)h+=(e.clientLeft*2);if(e.clientTop>0)height+=(e.clientTop*2);return h;},_startResizeMonitor:function(){var b,a=document.documentElement;if(this._opts.hideOverflow){a.style.overflow='hidden';document.body.style.overflow='hidden';}setInterval((function(){var f=this._computeSize();var g=new Date().getTime();var c=this._lastResizeAckId<this._resizeCount&&(g-this._resizeTimestamp)>this._opts.resizeAckTimeout;if(!b||(this._opts.expectResizeAck&&c)||(this._opts.allowShrink&&b.width!=f.width)||(!this._opts.allowShrink&&b.width<f.width)||(this._opts.allowShrink&&b.height!=f.height)||(!this._opts.allowShrink&&b.height<f.height)){b=f;this._resizeCount++;this._resizeTimestamp=g;var e={type:'resize',height:f.height,ackData:{id:this._resizeCount}};if(f.width&&f.width!=0)e.width=f.width;try{if(URI(document.referrer).isFacebookURI()&&window.parent!=window&&window.name&&window.parent.location&&window.parent.location.toString&&URI(window.parent.location).isFacebookURI()){var iframes=window.parent.document.getElementsByTagName('iframe');for(var i=0;i<iframes.length;i=i+1)if(iframes[i].name==window.name){if(this._opts.resizeWidth)iframes[i].style.width=e.width+'px';iframes[i].style.height=e.height+'px';}}this.send(e);}catch(d){this.send(e);}}}).bind(this),this._opts.resizeTimeout);}};var UnverifiedXD=copy_properties({},XD);
WindowComm={_callbacks:{},makeHandler:function(a,c){c=c||'opener';var b='f'+(Math.random()*(1<<30)).toString(16).replace('.','');WindowComm._callbacks[b]=a;return new URI('/connect/window_comm.php').setQueryData({_id:b,_relation:c}).getQualifiedURI().toString();},_recv:function(b){var a=new URI(b).getQueryData();WindowComm._callbacks[a._id](a);}};
var PopupResizer={_opts:{allowShrink:true,timeout:100},init:function(a){copy_properties(PopupResizer._opts,a);setInterval(PopupResizer._resizeCheck,PopupResizer._opts.timeout);},_resizeCheck:function(){var e=Vector2.getViewportDimensions(),a=PopupResizer._getDocumentSize(),c=a.y-e.y,d=a.x-e.x;if(d<0)d=0;if(!PopupResizer._opts.allowShrink&&c<0)c=0;if(c||d)try{window.resizeBy(d,c);if(d)window.moveBy(d/-2,0);}catch(b){}},_getDocumentSize:function(){var a={x:ua.firefox()?document.documentElement.scrollWidth:document.body.scrollWidth,y:document.body.scrollHeight};if(a.x<=0||a.x>document.documentElement.scrollWidth)a.x=document.documentElement.scrollWidth;if(a.y<=0||a.y>document.documentElement.scrollHeight)a.y=document.documentElement.scrollHeight;if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>a.y)a.y=Dialog.max_bottom;return a;},open:function(i,b,j){var f=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,g=typeof window.screenY!='undefined'?window.screenY:window.screenTop,e=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,d=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),c=parseInt(f+((e-j)/2),10),h=parseInt(g+((d-b)/2.5),10),a=('width='+j+',height='+b+',left='+c+',top='+h);return window.open(i,'_blank',a);}};
ConnectLogin={init:function(a){this.appID=a.appID;this.addToProfile=a.addToProfile;this.oneClick=a.oneClick;this.channelUrl=a.channelUrl;XD.init(a);},login:function(a,c,b){if(this.oneClick&&!c){this._oneClick(a);}else this._openPopup(a,c,b);},logout:function(){XD.send({type:'logout'});},_oneClick:function(a){new AsyncRequest().setURI('/ajax/api/tos.php').setData({app_id:this.appID,grant_perm:1}).setHandler(function(b){ConnectLogin._refreshLoginStatus();a&&a();}).send();},_openPopup:function(c,e,d){d=d||{};var b=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();if(ConnectLogin.appID)ConnectLogin._refreshLoginStatus();c&&c();}),a=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();}),g=new URI('/login.php');g.setQueryData({api_key:this.appID,next:b,channel_url:a,cancel_url:a,req_perms:e,v:'1.0',fbconnect:1,add_to_profile:this.addToProfile,display:'popup'});g.addQueryData(d);var f=this._getSize(d);this._popup=PopupResizer.open(g.toString(),f.height,f.width);},_closePopup:function(){if(this._popup){this._popup.close();this._popup=null;}},_refreshLoginStatus:function(){if(this.channelUrl){XD.send({type:'refreshLoginStatus'});}else window.location.reload();},_getSize:function(a){if(a.social_plugin=='registration'){return {width:640,height:370};}else return {width:610,height:280};}};
var PlatformOptInPopup=function(){};copy_properties(PlatformOptInPopup,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(d,c,a){if(!d)d='generic';if(!c)c='opt.in';var b=new URI(PlatformOptInPopup.DIALOG_URL);b.addQueryData({social_plugin:d,method:c,display:'popup',secure:URI.getRequestURI().isSecure(),app_id:PlatformOptInPopup.APP_ID});if(a)b.addQueryData(a);return PopupResizer.open(b.toString(),PlatformOptInPopup.DIALOG_WIDTH,PlatformOptInPopup.DIALOG_HEIGHT);}});
WidgetArbiter={_findSiblings:function(){if(WidgetArbiter._siblings)return;WidgetArbiter._siblings=[];for(var b=parent.frames.length-1;b>=0;b--)try{if(parent.frames[b]&&parent.frames[b].Arbiter&&parent.frames[b].Arbiter.inform)WidgetArbiter._siblings.push(parent.frames[b].Arbiter);}catch(a){}},inform:function(){WidgetArbiter._findSiblings();var a=$A(arguments);WidgetArbiter._siblings.each(function(b){b.inform.apply(b,a);});}};
!function(){var b=document.documentElement;var a=function(c){c=c||window.event;var d=c.target||c.srcElement;var f=d.getAttribute('placeholder');if(f){var e=Parent.byClass(d,'focus_target');if('focus'==c.type||'focusin'==c.type){if(d.value==f&&CSS.hasClass(d,'DOMControl_placeholder')){d.value='';CSS.removeClass(d,'DOMControl_placeholder');}if(e){CSS.addClass(e,'child_is_active');CSS.addClass(e,'child_is_focused');CSS.addClass(e,'child_was_focused');Arbiter.inform('reflow');}}else{if(d.value==''){CSS.addClass(d,'DOMControl_placeholder');d.value=f;e&&CSS.removeClass(e,'child_is_active');d.style.direction='';}e&&CSS.removeClass(e,'child_is_focused');}}};if(b.addEventListener){b.addEventListener('focus',a,true);b.addEventListener('blur',a,true);}else b.onfocusin=b.onfocusout=a;}();
onloadRegister(function(){Event.listen(document.documentElement,'submit',function(b){var a=b.getTarget().getElementsByTagName('*');for(var c=0;c<a.length;c++)if(a[c].getAttribute('placeholder')&&Input.isEmpty(a[c]))Input.setValue(a[c],'');});});
var ExternalNodeConnectWidget=function(i){copy_properties(this,{widgetID:i.widgetID,widget:$(i.widgetID),viewerID:i.viewer,nodeType:i.nodeType,viewerIsAdmin:i.viewerIsAdmin&&!i.userOptedOut,adminUrl:i.adminUrl,popupOptInParams:{},nodeUri:new URI(i.nodeURL),externalUrl:i.externalURL,pageId:i.pageId,layout:i.layout,edgeType:i.edgeType,error:i.error,errorURI:new URI('/'),alreadyConnected:i.alreadyConnected,usingConnectLibrary:!!i.channelURL,commentWidgetMarkup:i.commentWidgetMarkup,commentWidgetOpen:false,commentWidgetVisible:false,userProfile:null,connectStoryFbid:0,isAmbiguousText:i.isAmbiguousText,socialBar:i.socialbar,useDisconnectLink:i.useDisconnectLink,showError:i.showError,showConfirm:i.showConfirm,showFaces:i.showFaces,connectText:i.connectText,ref:i.ref,userOptedOut:i.userOptedOut,usingInlineCommenting:i.usingInlineCommenting,mobile:i.mobile,supportCommenting:!i.mobile&&(!!i.channelURL||i.usingInlineCommenting),inlineCommentListenersInitialized:false,inlineCommentFocused:false,forceCommentHooks:i.forceCommentHooks,nux:i.nux,iframeReferer:i.iframeReferer,isBlocked:i.isBlocked,isPersonalized:i.isPersonalized,confirmedConnect:i.confirmedConnect,hasSend:i.send,colorScheme:i.colorScheme,grayOut:i.grayOut});if(this.usingConnectLibrary)UnverifiedXD.init({autoResize:i.autoResize,channelUrl:i.channelURL,resizeWidth:i.autoResize&&i.layout!==ExternalNodeConnectWidget.STANDARD_LAYOUT});this.connectButtonSlider=DOM.scry(this.widget,'div.connect_button_slider');this.connectButtonContainer=null;if(this.connectButtonSlider.length){this.connectButtonSlider=this.connectButtonSlider[0];this.connectButtonContainer=DOM.find(this.connectButtonSlider,'div.connect_button_container');}else this.connectButtonSlider=null;this.connectButton=DOM.find(this.widget,'a.connect_widget_like_button');if(this.grayOut)this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');this.connectedMessage=DOM.scry(this.widget,'span.connect_widget_connected_text');this.connectedMessage=this.connectedMessage.length?this.connectedMessage[0]:null;this.notConnectedMessage=DOM.scry(this.widget,'span.connect_widget_not_connected_text');this.notConnectedMessage=this.notConnectedMessage.length?this.notConnectedMessage[0]:null;this.adminSpans=DOM.scry(this.widget,'span.connect_widget_admin_span');if(this.adminSpans.length>0){this.adminLinks=[];for(var a=0;a<this.adminSpans.length;a++)this.adminLinks[a]=DOM.find(this.adminSpans[a],'a.connect_widget_admin_option');}if(this.layout==ExternalNodeConnectWidget.STANDARD_LAYOUT){this.confirmationCell=DOM.find(this.widget,'div.connect_confirmation_cell');this.userActionTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_user_action');this.summaryTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_summary');this.summaryText=DOM.find(this.confirmationCell,'div.connect_widget_text_summary');var j=DOM.scry(this.widget,'div.connect_widget_sample_connections');this.sampleConnections=j.length>0?j[0]:null;if(i.showFaces&&i.viewer>0){var e=DOM.scry(this.widget,'div.connect_widget_logged_in_user');this.loggedInUserPhotoDiv=e.length>0?e[0]:null;}}if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.originalButtonWidth=this.computeButtonDimensions().width;this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_simple_including');this.supportCommenting=false;this.usingInlineCommenting=false;}this.setQueryData();if(this.pageId)copy_properties(this.popupOptInParams,{connect_id:this.pageId});this.errorSpans=DOM.scry(this.widget,'span.connect_widget_error_span');if(this.errorSpans.length>0){this.errorLinks=[];for(var b=0;b<this.errorSpans.length;b++)this.errorLinks[b]=DOM.find(this.errorSpans[b],'a.connect_widget_error_text');}this.confirmSpans=DOM.scry(this.widget,'span.connect_widget_confirm_span');if(this.confirmSpans.length>0){this.confirmLinks=[];for(var d=0;d<this.confirmSpans.length;d++)this.confirmLinks[d]=DOM.find(this.confirmSpans[d],'a.connect_widget_confirm_link');}this.unlikeSpans=DOM.scry(this.widget,'span.unlike_span');this.unlikeLinks=[];for(var c=0;c<this.unlikeSpans.length;c++){this.unlikeLinks[c]=DOM.find(this.unlikeSpans[c],'a.connect_widget_unlike_link');Event.listen(this.unlikeLinks[c],'click',this.connectToNodeOnClick.bind(this));}var h=DOM.scry(this.widget,'div.connect_widget_number_cloud');if(h.length==1){this.numberCloud=h[0];this.numberCloudNub=DOM.find(this.widget,'div.connect_widget_number_cloud_nub');this.numberCloudExtension=DOM.find(this.numberCloud,'div.connect_widget_number_cloud_extension');this.sizeNumberCloud();this.numberCloudUnlikeSpan=DOM.find(this.numberCloudExtension,'span.unlike_span');this.numberCloudReminderSpan=DOM.find(this.numberCloudExtension,'span.like_reminder');this.inAnimation=false;this.reminderIsVisible=CSS.hasClass(this.numberCloudUnlikeSpan,'hidden_elem');Event.listen(this.numberCloud,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloud,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',function(event){this.requiresMouseLeaveEvent=false;}.bind(this));}if(this.usingInlineCommenting&&!this.showFaces){this.shareCommentSpans=DOM.scry(this.widget,'span.connect_widget_share_comment_span');for(var f=0;f<this.shareCommentSpans.length;f++){var k=DOM.find(this.shareCommentSpans[f],'a.connect_widget_share_comment_option');Event.listen(k,'click',function(event){for(var l=0;l<this.shareCommentSpans.length;l++)CSS.addClass(this.shareCommentSpans[l],'hidden_elem');this.presentCommentingOption();}.bind(this));}}if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){XD.forced_min_width=this.getButtonCountWidgetWidth();this.numberExcluding=DOM.find(this.widget,'td.connect_widget_button_count_excluding');this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_button_count_including');this.thumbsUpIcon=DOM.find(this.summaryIncluding,'div.thumbs_up');this.undoRegion=DOM.find(this.summaryIncluding,'div.undo');this.originalButtonWidth=this.computeButtonDimensions().width;Event.listen(this.thumbsUpIcon,'mouseenter',function(event){this.undoButton=DOM.find(this.undoRegion,'label.undo_button input');Event.listen(this.undoButton,'click',this.connectToNodeOnClick.bind(this));CSS.addClass(this.thumbsUpIcon,'hidden_elem');CSS.removeClass(this.undoRegion,'hidden_elem');}.bind(this));Event.listen(this.undoRegion,'mouseleave',function(event){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}.bind(this));}if(!this.isBlocked){Event.listen(this.connectButton,'click',this.primaryLikeButtonOnClick.bind(this));if(this.grayOut)Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}if(this.adminLinks)for(var a=0;a<this.adminLinks.length;a++)Event.listen(this.adminLinks[a],'click',this.presentAdminPage.bind(this));if(this.errorLinks)for(var a=0;a<this.errorLinks.length;a++)Event.listen(this.errorLinks[a],'click',this.presentErrorDialog.bind(this));if(this.confirmLinks)for(var g=0;g<this.confirmLinks.length;g++)Event.listen(this.confirmLinks[g],'click',this.presentConfirmDialog.bind(this));if(i.showCaptcha){this.showCaptcha=true;this.connectToNode(true);}if(this.forceCommentHooks)this.setupCommentHooks($(this.forceCommentHooks));this.textInputMarginWithButton=5;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/send/resize',this.syncSendWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/like/resize',{button_width:this.computeButtonDimensionsWithPadding().width,widget_width:Vector2.getElementDimensions(this.widget).x,layout:this.layout},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(m,l){if(l.controllerID!==this.widgetID)this.otherCommentWidgetOpen=(l.event=='open');}.bind(this));this.subscribeToSync(i);};copy_properties(ExternalNodeConnectWidget,{STANDARD_LAYOUT:'standard',BOX_COUNT_LAYOUT:'box_count',BUTTON_COUNT_LAYOUT:'button_count',SIMPLE_LAYOUT:'simple',COLOR_DARK:0,COLOR_LIGHT:1,OPT_IN_FACEBOOK_APP_ID:'127760087237610',updateLoggedInUser:function(b){var a=ExternalNodeConnectWidget.controllerManagingLogin;a.setLoggedIn(b);a.connectToNode(true);a.userOptedOut=false;delete ExternalNodeConnectWidget.controllerManagingLogin;Arbiter.inform('platform/socialplugins/login',{user:b.user},Arbiter.BEHAVIOR_STATE);WidgetArbiter.inform('platform/socialplugins/login',{user:b.user},Arbiter.BEHAVIOR_STATE);},onCommentWidgetLoaded:function(a){var b=ExternalNodeConnectWidget.self;delete ExternalNodeConnectWidget.self;b.injectCommentWidgetMarkup(a);}});copy_properties(ExternalNodeConnectWidget.prototype,{getSyncEndpointName:function(){},getConnectionEndpointName:function(){},getPluginName:function(){},subscribeToSync:function(a){Arbiter.subscribe('platform/socialplugins/login',function(c,b){if(this.viewerID&&b.user!==this.viewerID)document.location.reload();}.bind(this));Arbiter.subscribe(this.getSyncEndpointName(),function(c,b){if(b.externalUrl==a.externalURL){this.userOptedOut=false;this.updateWidget(b.opts,true);}}.bind(this));},setQueryData:function(){copy_properties(this.popupOptInParams,{protocol:window.location.protocol,external_page_url:this.externalUrl});if(this.nux)copy_properties(this.popupOptInParams,{nux:this.nux,referer:this.iframeReferer});},updateWidget:function(e,d,b){var a=(this.alreadyConnected!=e.nowConnected)||(this.showConfirm!=e.showConfirm);if(!d)Arbiter.inform(this.getConnectionEndpointName(),e,Arbiter.BEHAVIOR_STATE);this.alreadyConnected=e.nowConnected;this.viewerIsAdmin=e.isAdmin;this.showError=e.showError;this.showConfirm=e.showConfirm;this.adminUrl=e.adminUrl;this.userProfile=e.userProfile;this.connectStoryFbid=e.connectStoryFbid;this.error=e.error;if(!e.nowConnected)this.closeCommentWidget();if(a&&!d||b){var c=e.nowConnected?'edgeCreated':'edgeRemoved';UnverifiedXD.send({type:c});}if(a||this.error)this.syncWidgetDisplay();if(!d||b)WidgetArbiter.inform(this.getSyncEndpointName(),{externalUrl:this.externalUrl,opts:e},Arbiter.BEHAVIOR_STATE);},presentOptIn:function(){ExternalNodeConnectWidget.controllerManagingLogin=this;PlatformOptInPopup.open(this.getPluginName(),'opt.inlike',this.popupOptInParams);UnverifiedXD.send({type:'authPrompted'});},setLoggedIn:function(a){this.viewerID=a.user;this.newProfilePic=a.profilePic;this.placeFormUserCheck(a.formUserCheck,a.fbDtsg);},placeFormUserCheck:function(b,a){window.Env.fb_dtsg=a;if(ge('post_form_id')){DOM.replace($('post_form_id'),HTML(b));}else DOM.appendContent(DOM.find(document,'body'),HTML(b));},syncWidgetWithServer:function(c){var b=c.getPayload();if(b.requires_login){this.updateWidget({nowConnected:false,isAdmin:false},false);this.presentOptIn();return;}var a={nowConnected:b.success&&b.already_connected,isAdmin:b.is_admin,showError:b.show_error,showConfirm:b.show_confirm,adminUrl:b.admin_url,userProfile:b.user_profile,connectStoryFbid:b.story_fbid,error:b.error_info};this.updateWidget(a,!b.success,b.success);if(b.success&&this.showCaptcha){window.opener.location.reload();window.close();}},getButtonCountWidgetWidth:function(){var a=DOM.find(this.widget,'table.connect_widget_interactive_area');var b=CSS.getStyle(a,'width');return parseInt(b,10);},sizeNumberCloud:function(){this.collapsedNumberCloudHeight=this.getCollapsedNumberCloudHeight();this.expandedNumberCloudHeight=this.collapsedNumberCloudHeight+this.getNumberCloudExtensionHeight();if(this.alreadyConnected)CSS.setStyle(this.numberCloud,'height',this.expandedNumberCloudHeight+'px');var a=this.computeButtonDimensionsWithPadding().width;XD.forced_min_width=a;var b=intl_locale_is_rtl();a-=2;CSS.setStyle(this.numberCloud,'width',a+'px');CSS.setStyle(this.numberCloud,'visibility','visible');animation(this.numberCloud).from('opacity',0).to('opacity',1).duration(100).go();},getCollapsedNumberCloudHeight:function(){var b=Vector2.getElementDimensions(this.numberCloud).y;var d=parseInt(CSS.getStyle(this.numberCloud,'paddingTop'),10);var c=parseInt(CSS.getStyle(this.numberCloud,'paddingBottom'),10);var a=parseInt(CSS.getStyle(this.numberCloud,'border'),10);return b-d-c-2;},getNumberCloudExtensionHeight:function(){CSS.addClass(this.numberCloudExtension,'connect_widget_offscreen');if(!this.alreadyConnected)CSS.removeClass(this.numberCloudExtension,'hidden_elem');var a=Vector2.getElementDimensions(this.numberCloudExtension).y;if(!this.alreadyConnected)CSS.addClass(this.numberCloudExtension,'hidden_elem');CSS.removeClass(this.numberCloudExtension,'connect_widget_offscreen');return a;},restoreReminderSpan:function(event){if(this.reminderIsVisible||this.inAnimation)return;this.animateReminderSpanReappearance();},animateReminderSpanReappearance:function(){if(this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.setStyle(this.numberCloudReminderSpan,'opacity',0);CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloudReminderSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=true;}.bind(this)).go();},exposeUnlikeSpan:function(event){if(!this.alreadyConnected||this.requiresMouseLeaveEvent||!this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudReminderSpan,'hidden_elem');CSS.setStyle(this.numberCloudUnlikeSpan,'opacity',0);CSS.removeClass(this.numberCloudUnlikeSpan,'hidden_elem');animation(this.numberCloudUnlikeSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=false;}.bind(this)).go();},conditionallyActivateButton:function(event){this.commentButtonIsActive=this.inlineCommentInput.value.trim().length>0;},updateConnectionWithComment:function(event){Event.kill(event);if(this.commentButtonIsActive){this.postInlineComment();this.resetInlineComment();this.closeInlineComment();}},postInlineComment:function(){this.postUserComment(this.inlineCommentInput.value.trim(),false,'iframe');},resetInlineComment:function(){this.concealCommentButton();var a=this.inlineCommentInput.getAttribute('placeholder');this.inlineCommentInput.value=a;},showInlineComment:function(event){Event.kill(event);if(!this.inlineCommentFlyoutOpen||this.inlineCommentFlyoutVisible||this.showConfirm||this.error)return;this.inlineCommentFlyoutVisible=true;CSS.show(this.inlineCommentFlyout);},hideInlineComment:function(event){Event.kill(event);if(this.inlineCommentFocused||!this.inlineCommentFlyoutOpen||!this.inlineCommentFlyoutVisible)return;if(DOM.contains(this.inlineCommentFlyout,event.getRelatedTarget()))return;var b=this.inlineCommentInput.value.trim();var a=this.inlineCommentInput.getAttribute('placeholder');if(b.length>0&&b!=a)return;this.inlineCommentFlyoutVisible=false;CSS.hide(this.inlineCommentFlyout);},closeInlineComment:function(){this.inlineCommentFlyoutVisible=false;this.inlineCommentFlyoutOpen=false;CSS.hide(this.inlineCommentFlyout);this.resetInlineComment();},concealCommentButton:function(){CSS.addClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);},positionInlineCommentFlyout:function(){CSS.addClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.removeClass(this.inlineCommentFlyout,'hidden_elem');var b=0;var a=this.computeButtonDimensions();var e=a.height;var d=this.grayOut?b:b+20;var g=intl_locale_is_rtl()?'right':'left';if(this.showFaces){var k=DOM.scry(this.widget,'span.connect_widget_text')[0];var h=intl_locale_is_rtl()?'paddingRight':'paddingLeft';var l=CSS.getStyle(k,h);d=this.grayOut?b:b+parseInt(l,10);var i=Vector2.getElementDimensions(this.sampleConnections).y;e=i-3;}var j=Vector2.getElementDimensions(this.summaryText).y;if(j>15)e+=2;CSS.setStyle(this.inlineCommentFlyout,g,d+'px');CSS.setStyle(this.inlineCommentFlyout,'top',(-e)+'px');var n=Vector2.getElementPosition(this.widget,'document').x;var m=Vector2.getElementDimensions(this.widget).x;var o=n+m-d-5;CSS.setStyle(this.inlineCommentFlyout,'width',o+'px');CSS.removeClass(this.inlineCommentButton,'hidden_elem');var f=Vector2.getElementDimensions(this.inlineCommentButton).x;CSS.addClass(this.inlineCommentButton,'hidden_elem');var c=(this.inlineCommentClose)?15:0;this.textInputWidthWithoutButton=o-24-c;this.textInputWidthWithButton=this.textInputWidthWithoutButton-f-this.textInputMarginWithButton-1;CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);CSS.removeClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.addClass(this.inlineCommentFlyout,'hidden_elem');},postUserComment:function(a,c,d){var b={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,connect_text:this.connectText,story_fbid:this.connectStoryFbid,comment:a,widget_type:d||'xfbml',own_product:c};new AsyncRequest().setURI(this.getCommentAjaxEndpoint()).setData(b).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();this.closeCommentWidget();},closeCommentWidget:function(){if(this.commentWidgetOpen){delete this.inGracePeriod;delete this.commentWidgetIsExpanded;this.commentWidgetVisible=false;this.commentWidgetOpen=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});}},presentAdminPage:function(){var a='_blank';window.open(this.adminUrl.toString(),a);},presentErrorDialog:function(){if(!this.error.errorUri)return;var b='_blank';var a='toolbar=0, status=0, width=960, height=300';window.open(this.error.errorUri.toString(),b,a);},presentConfirmDialog:function(){var b='_blank';var a='toolbar=0,status=0,width=450,height=200,scrollbars=0,location=0,menubar=0';if(!window.confirmDialogReturn)window.confirmDialogReturn={};window.confirmDialogReturn[this.widgetID]=this;var c=this.getConfirmURL();window.open(c,b,a);},returnFromConfirmDialog:function(a){if(a){this.showConfirm=null;this.confirmedConnect=a;this.connectToNode(!this.alreadyConnected);}else this.updateWidget({nowConnected:this.alreadyConnected,showConfirm:null,isAdmin:this.viewerIsAdmin},false);},syncWidgetDisplay:function(){var a=this.alreadyConnected;this.setButtonState(a);this.showElementIf(this.connectedMessage,a);this.showElementIf(this.notConnectedMessage,!a);if(this.adminSpans)for(var b=0;b<this.adminSpans.length;b++)this.showElementIf(this.adminSpans[b],this.viewerIsAdmin);if(this.errorSpans)for(var c=0;c<this.errorSpans.length;c++)this.showElementIf(this.errorSpans[c],this.error&&(this.viewerIsAdmin||this.showError));for(var f=0;f<this.confirmSpans.length;f++)this.showElementIf(this.confirmSpans[f],!this.alreadyConnected&&this.showConfirm);for(var d=0;d<this.unlikeSpans.length;d++)this.showElementIf(this.unlikeSpans[d],this.alreadyConnected);if(this.shareCommentSpans)for(var e=0;e<this.shareCommentSpans.length;e++)this.showElementIf(this.shareCommentSpans[e],a);this.showElementIf(this.connectButton,(!this.useDisconnectLink||!a)&&!this.showConfirm);if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT){this.manageBoxCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){this.manageButtonCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.manageSimpleButtonAnimation(a);}else this.manageStandardButtonAnimation(a);if(!this.loggedInUserPhotoDiv)return;if(a){this.slideUserPhotoIn(this.loggedInUserPhotoDiv);}else this.slideUserPhotoOut(this.loggedInUserPhotoDiv);},manageStandardButtonAnimation:function(a){if(this.grayOut)return;if(this.alreadyConnected||this.showConfirm){this.hideButton(true);}else this.hideButton(false);},setButtonState:function(a){if(a){CSS.removeClass(this.connectButton,'like_button_no_like');CSS.addClass(this.connectButton,'like_button_like');this.fixIEButtonDoubleLineBug();}else{CSS.addClass(this.connectButton,'like_button_no_like');CSS.removeClass(this.connectButton,'like_button_like');}},fixIEButtonDoubleLineBug:function(){if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&ua.ie()<=7&&!this.hasBeenFixed){var a=this.computeButtonDimensionsWithPadding();CSS.setStyle(this.connectButton,'width',a.width+1);this.hasBeenFixed=true;}},hideButton:function(a){if(this.layout!=='standard')return;if(this.oAnimateBlind)this.oAnimateBlind.stop();this.oAnimateBlind=animation(this.connectButtonSlider).duration(150);var c=1,b=intl_locale_is_rtl(),d=b?'marginRight':'marginLeft',e=b?'marginLeft':'marginRight';if(a){CSS.addClass(this.connectButtonContainer,'hidden');this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonContainer,d,'2px');CSS.setStyle(this.connectButtonContainer,'visibility','hidden');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_no_like');this.oAnimateBlind=null;}.bind(this));}else{CSS.setStyle(this.connectButtonContainer,d,'0px');c=Vector2.getElementDimensions(this.connectButton).x;this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonSlider,'overflow','visible');CSS.setStyle(this.connectButtonSlider,'width','auto');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_no_like');CSS.setStyle(this.connectButtonContainer,'visibility','visible');CSS.removeClass(this.connectButtonContainer,'hidden');this.oAnimateBlind=null;}.bind(this));}this.oAnimateBlind.to('width',c).blind().go();},showElementIf:function(a,b){if(!a)return;if(b){CSS.show(a);}else CSS.hide(a);},slideUserPhotoIn:function(b){if(!CSS.hasClass(b,'connect_widget_user_not_connected'))return;var a=CSS.getStyle(b,'width');CSS.setStyle(b,'width',0);CSS.setStyle(b,'opacity',0);CSS.removeClass(b,'connect_widget_user_not_connected');animation(b).to('width',a).duration(100).checkpoint().to('opacity',1).duration(400).go();},slideUserPhotoOut:function(a){if(CSS.hasClass(a,'connect_widget_user_not_connected'))return;animation(a).to('opacity',0).duration(100).checkpoint(.25).to('width',0).duration(100).ondone(function(){CSS.addClass(a,'connect_widget_user_not_connected');CSS.setStyle(a,'width',null);}).go();},primaryLikeButtonOnClick:function(event){if(this.grayOut&&this.alreadyConnected&&!this.mobile)return;this.connectToNodeOnClick(event);if(this.tombstoneCross&&this.alreadyConnected)DOM.replace(this.tombstoneCross,HTML('<div class="tombstone_cross tombstone_cross_static" />'));setTimeout(function(){this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');CSS.removeClass(this.tombstoneCross,'tombstone_cross_static');Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}.bind(this),1000);},_clickLocked:false,connectToNodeOnClick:function(event){Event.kill(event);if(!this._clickLocked){this._clickLocked=true;setTimeout(function(){this._clickLocked=false;}.bind(this),1000);if(this.viewerID==0||this.userOptedOut){this.presentOptIn();}else this.connectToNode(!this.alreadyConnected);}},connectToNode:function(d){if(!d){if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT)return;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.removeClass(this.summaryTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',1);}if(this.shareCommentSpans)for(var b=0;b<this.shareCommentSpans.length;b++)CSS.addClass(this.shareCommentSpans[b],'hidden_elem');if(this.commentWidgetOpen){this.closeCommentWidget();}else if(this.inlineCommentFlyoutOpen)this.closeInlineComment();}this.updateWidget({nowConnected:!this.alreadyConnected,isAdmin:this.viewerIsAdmin},true);var a={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,layout:this.layout,is_personalized:this.isPersonalized,show_captcha:this.showCaptcha,connect_text:this.connectText,ref:this.ref,now_connected:d,post_form_id:$('post_form_id').value,iframe_referer:this.iframeReferer};if(this.confirmedConnect)a.confirm=1;new AsyncRequest().setURI(this.getAjaxEndpoint()).setHandler(this.syncWidgetWithServer.bind(this)).setData(a).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();if(d){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT)this.requiresMouseLeaveEvent=true;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.setStyle(this.userActionTextSpan,'opacity',1);CSS.removeClass(this.userActionTextSpan,'hidden_elem');CSS.addClass(this.summaryTextSpan,'hidden_elem');Event.listen(this.widget,'mouseleave',this.transitionBetweenMessages.bind(this));}if(this.shareCommentSpans){for(var c=0;c<this.shareCommentSpans;c++)CSS.removeClass(this.shareCommentSpans[c],'hidden_elem');}else if(this.supportCommenting)this.presentCommentingOption();this.repositionFacepileVertically();}},transitionBetweenMessages:function(event){if(!this.alreadyConnected||CSS.hasClass(this.userActionTextSpan,'hidden_elem'))return;animation(this.userActionTextSpan).to('opacity',0).duration(500).ondone(function(){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',0);CSS.removeClass(this.summaryTextSpan,'hidden_elem');animation(this.summaryTextSpan).to('opacity',1).duration(500).ondone(function(){this.repositionFacepileVertically();}.bind(this)).go();this.positionInlineCommentFlyout();}.bind(this)).go();},presentCommentingOption:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.widgetID,event:'open'});if(this.usingConnectLibrary){ExternalNodeConnectWidget.self=this;var a={type:'presentEdgeCommentDialog',masterFrameName:window.name,version:2};if(this.layout==ExternalNodeConnectWidget.BOX_COUNT_LAYOUT){a.preComputedWidthOffset=this.computeButtonDimensionsWithPadding().width;if(!intl_locale_is_rtl())a.preComputedWidthOffset+=8;}if(this.socialBar){a.left=parseInt(CSS.getStyle(document.getElementById('profile'),'width'),10)+1;}else if(this.hasSend&&this.layout==ExternalNodeConnectWidget.STANDARD_LAYOUT)a.preComputedWidthOffset=this.invertedButtons?0:65;UnverifiedXD.send(a);this.commentWidgetOpen=true;this.commentWidgetVisible=true;this.commentWidgetExpanded=true;}else if(this.usingInlineCommenting)if(!this.inlineCommentListenersInitialized){this.unwrapComment();this.initializeInlineCommentListeners();this.openInlineCommentFlyout();this.positionInlineCommentFlyout();this.inlineCommentListenersInitialized=true;}else{this.positionInlineCommentFlyout();this.openInlineCommentFlyout();}},unwrapComment:function(){if(this.unwrapComment.done)return;var b=$('connect-widget-comment-box-markup'),a=ExternalNodeConnectWidget.commentMarkup;b.innerHTML=a;this.unwrapComment.done=true;},initializeInlineCommentListeners:function(){this.inlineCommentFlyout=DOM.find(this.widget,'.connect_widget_comment_box');this.inlineCommentInput=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_textinput');this.inlineCommentButton=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_button');this.inlineCommentClose=DOM.scry(this.inlineCommentFlyout,'.connect_widget_comment_close_button');if(this.inlineCommentClose.length>0)this.inlineCommentClose=this.inlineCommentClose[0];this.commentButtonIsActive=false;Event.listen(this.inlineCommentInput,'keyup',this.conditionallyActivateButton.bind(this));Event.listen(this.inlineCommentInput,'focus',function(){this.inlineCommentFocused=true;this.exposeCommentButton();}.bind(this));Event.listen(this.inlineCommentButton,'click',this.updateConnectionWithComment.bind(this));Event.listen(this.inlineCommentInput,'blur',function(){this.inlineCommentFocused=false;this.hideInlineComment();}.bind(this));Event.listen(this.widget,'mouseout',this.hideInlineComment.bind(this));Event.listen(this.widget,'mouseover',this.showInlineComment.bind(this));if(this.inlineCommentClose)Event.listen(this.inlineCommentClose,'click',function(event){for(var a=0;a<this.shareCommentSpans.length;a++)CSS.removeClass(this.shareCommentSpans[a],'hidden_elem');this.closeInlineComment();}.bind(this));},exposeCommentButton:function(event){if(!CSS.hasClass(this.inlineCommentButton,'hidden_elem'))return;CSS.removeClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',this.textInputMarginWithButton+'px');},openInlineCommentFlyout:function(){CSS.show(this.inlineCommentFlyout);this.inlineCommentFlyoutOpen=true;this.inlineCommentFlyoutVisible=true;},manageBoxCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateBoxCountButtonDisappearance();}else this.animateBoxCountButtonReappearance();},animateBoxCountButtonDisappearance:function(){if(this.grayOut)return;CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.numberCloudExtension,'opacity',0);CSS.removeClass(this.numberCloudExtension,'hidden_elem');CSS.addClass(this.numberCloudNub,'hidden_elem');CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloud).to('height',this.expandedNumberCloudHeight).duration(100).ondone(function(){animation(this.numberCloudExtension).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateBoxCountButtonReappearance:function(){CSS.addClass(this.numberCloudExtension,'hidden_elem');animation(this.numberCloud).to('height',this.collapsedNumberCloudHeight).duration(75).ondone(function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.setStyle(this.connectButton,'opacity',0);CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('opacity',0).to('opacity',1).duration(75).ondone(function(){CSS.setStyle(this.numberCloudNub,'opacity',0);CSS.removeClass(this.numberCloudNub,'hidden_elem');animation(this.numberCloudNub).from('opacity',0).to('opacity',1).duration(50).go();}.bind(this)).go();}}.bind(this)).go();},manageButtonCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateButtonCountButtonDisappearance();}else this.animateButtonCountButtonReappearance();if(!this.grayOut){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}},manageSimpleButtonAnimation:function(a){if(this.grayOut)return;if(a&&!this.showConfirm){this.animateSimpleButtonDisappearance();}else this.animateSimpleButtonReappearance();},animateButtonCountButtonDisappearance:function(){if(!this.grayOut)animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');}.bind(this)).duration(100).go();animation(this.numberExcluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.numberExcluding,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},animateSimpleButtonDisappearance:function(){animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).duration(50).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},computeButtonDimensions:function(){var c=CSS.hasClass(this.connectButton,'hidden_elem');if(c){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var a=Vector2.getElementDimensions(this.connectButton);var d=a.x;var b=a.y;var f=parseInt(CSS.getStyle(this.connectButton,'paddingLeft'),10);var g=parseInt(CSS.getStyle(this.connectButton,'paddingRight'),10);var h=parseInt(CSS.getStyle(this.connectButton,'paddingTop'),10);var e=parseInt(CSS.getStyle(this.connectButton,'paddingBottom'),10);if(c){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:d-f-g-2,height:b};},computeButtonDimensionsWithPadding:function(){var c=CSS.hasClass(this.connectButton,'hidden_elem');if(c){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var a=Vector2.getElementDimensions(this.connectButton);var d=a.x;var b=a.y;if(ua.ie())d+=3;if(c){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:d,height:b};},animateButtonCountButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else if(!this.grayOut){CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');CSS.setStyle(this.numberExcluding,'opacity',0);CSS.removeClass(this.numberExcluding,'hidden_elem');animation(this.numberExcluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateSimpleButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');}.bind(this)).go();},injectCommentWidgetMarkup:function(a){this.commentDocument=a;this.commentDocument.body.innerHTML=this.commentWidgetMarkup;this.transferCSSStyles();if(this.newProfilePic){var c=DOM.find(this.commentDocument,'img.connect_comment_widget_user_pic');c.src=this.newProfilePic;delete this.newProfilePic;}if(ua.ie()){var f=DOM.scry(this.commentDocument,'.connect_comment_share_preview_pic');if(f.length>0){f=f[0];var e=50;var d=Vector2.getElementDimensions(f);var g=e/d.x;if(g<1){CSS.setStyle(f,'width',e);CSS.setStyle(f,'height',d.y*g);}}}this.setupCommentHooks(this.commentDocument);this.commentWidgetIsExpanded=!this.inlineUnlikeLink;var b=this.getCommentActivatingComponent();b.onmouseout=this.commentDocument.body.onmouseout=this.onCommentMouseOut.bind(this);b.onmouseover=this.commentDocument.body.onmouseover=this.onCommentMouseOver.bind(this);this.inGracePeriod=false;},onCommentMouseOut:function(a){if(this.mouseclickToDismiss){this.mouseOutside=true;return true;}else return this.hideCommentWidget();},onCommentMouseOver:function(a){if(this.mouseclickToDismiss){this.mouseOutside=false;return true;}else return this.showCommentWidget();},setupCommentHooks:function(a){this.placeholderInputRegion=DOM.find(a,'div.connect_comment_widget_placeholder_input_region');this.placeholderInput=DOM.find(this.placeholderInputRegion,'input.connect_comment_widget_placeholder_input');this.fullInputRegion=DOM.find(a,'div.connect_comment_widget_full_input_region');this.fullInputTextarea=DOM.find(this.fullInputRegion,'textarea.connect_comment_widget_full_input_textarea');this.ownProductCheckbox=DOM.scry(a,'.connect_comment_widget_own_product_checkbox');if(this.ownProductCheckbox.length>0)this.ownProductCheckbox=this.ownProductCheckbox[0];this.widgetButtonRegion=DOM.find(a,'div.connect_comment_widget_button_region');this.postToFacebookButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_post_button input');if(this.postToFacebookButton.length>0){this.postToFacebookButton=this.postToFacebookButton[0];this.postToFacebookButton.onclick=this.updateUserComment.bind(this);}this.closeButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_close_button input');if(this.closeButton.length>0){this.closeButton=this.closeButton[0];this.closeButton.onclick=this.closeCommentWidget.bind(this);this.sendOnEnter=true;}this.mouseclickToDismiss=CSS.hasClass(this.widgetButtonRegion,'mouseclicktodismiss');this.inlineUnlikeLink=DOM.scry(a,'a.connect_comment_widget_unlike_link');if(this.inlineUnlikeLink.length>0){this.inlineUnlikeLink=this.inlineUnlikeLink[0];this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);}this.defaultInputText=this.placeholderInput.value;this.placeholderInput.onfocus=this.transitionToFullInputMode.bind(this);this.fullInputTextarea.onfocus=this.removePlaceholderText.bind(this);this.fullInputTextarea.onblur=(function(b){this.restorePlaceholderText();if(this.mouseclickToDismiss&&this.mouseOutside)return this.hideCommentWidget();}).bind(this);if(this.inlineUnlikeLink)this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);if(this.closeButton)this.closeButton.onclick=this.closeCommentWidget.bind(this);this.sendOnEnter=(CSS.hasClass(this.widgetButtonRegion,'sendonenter')||this.sendOnEnter);if(this.sendOnEnter){this.fullInputTextarea.onkeydown=(function(b){b=b||window.event;if(!b)return true;if(this.sendOnEnter&&b.keyCode==13&&!(b.ctrlKey||b.shiftKey||b.altKey||b.metaKey)){this.updateUserComment();return false;}if(this.didResetOnKeydown)return true;this.removePlaceholderText();this.didResetOnKeydown=true;return true;}).bind(this);this.transitionToFullInputMode();}},getCommentActivatingComponent:function(){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT||this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){return this.widget;}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){return this.widget;}else if(this.grayOut){return DOM.find(this.widget,'table.connect_widget_interactive_area');}else return this.confirmationCell;},showCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=true;this.killCloseThread();if(this.commentWidgetOpen&&!this.commentWidgetVisible){this.commentWidgetVisible=true;CSS.show(this.commentDocument.body);UnverifiedXD.send({type:'showEdgeCommentDialog'});}return false;},hideCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=false;if(this.commentWidgetOpen&&this.commentWidgetVisible){var a=function(){if(!this.inGracePeriod&&this.shouldHideExpandedWidget()){this.fullInputTextarea.blur();this.commentWidgetVisible=false;if(!this.socialBar)CSS.hide(this.commentDocument.body);UnverifiedXD.send({type:'hideEdgeCommentDialog'});}this.inGracePeriod=false;this.killCloseThread();}.bind(this);this.closeThreadID=setTimeout(a,100);}return false;},shouldHideExpandedWidget:function(){return !this.commentWidgetIsExpanded||this.fullInputTextarea.value===''||this.fullInputTextarea.value===this.defaultInputText;},killCloseThread:function(){if(this.closeThreadID){clearTimeout(this.closeThreadID);delete this.closeThreadID;}},transferCSSStyles:function(){var e=DOM.scry(window.document,'link');var f=DOM.scry(window.document,'style');var d=DOM.find(window.document,'html');var h=DOM.find(this.commentDocument,'html');var g=DOM.find(this.commentDocument,'head');for(var b=0;b<e.length;b++)if(e[b].rel=='stylesheet'){var c=this.commentDocument.createElement('link');c.rel=e[b].rel;c.href=e[b].href;c.type=e[b].type;g.appendChild(c);}for(b=0;b<f.length;b++){var i=this.commentDocument.createElement('style');var a=f[b].innerText||f[b].textContent||f[b].innerHTML;i.setAttribute("type","text/css");g.appendChild(i);if(i.styleSheet){i.styleSheet.cssText=a;}else{var j=this.commentDocument.createTextNode(a);i.appendChild(j);}}h.id=d.id;h.className=d.className;this.commentDocument.body.className=window.document.body.className;},transitionToFullInputMode:function(event){this.commentWidgetIsExpanded=true;CSS.hide(this.placeholderInputRegion);CSS.show(this.fullInputRegion);CSS.show(this.widgetButtonRegion);if(this.closeButton||this.sendOnEnter){this.restorePlaceholderText();var b=this.fullInputTextarea;if(document.selection){var a=b.createTextRange();a.collapse(true);a.moveEnd('character',0);a.moveStart('character',0);a.select();}else if(b.setSelectionRange){b.focus();b.setSelectionRange(0,0);}}return false;},removePlaceholderText:function(event){if(CSS.hasClass(this.fullInputTextarea,'connect_comment_widget_disabled')){CSS.removeClass(this.fullInputTextarea,'connect_comment_widget_disabled');this.fullInputTextarea.value='';}return false;},restorePlaceholderText:function(event){if(this.fullInputTextarea.value.trim()==''){this.fullInputTextarea.value=this.defaultInputText;CSS.addClass(this.fullInputTextarea,'connect_comment_widget_disabled');}return false;},updateUserComment:function(event){var b=this.fullInputTextarea.value.trim();var a=this.ownProductCheckbox.checked;if(b===''||b==this.defaultInputText){if(a===false)return false;b='';}this.postUserComment(b,a);return false;},getAjaxEndpoint:function(){return '/ajax/connect/external_node_connect.php';},getCommentAjaxEndpoint:function(){return '/ajax/connect/external_edge_comment.php';},getConfirmURL:function(){var a={href:this.externalUrl,page_id:this.pageId,node_type:this.nodeType,edge_type:this.edgeType,widget_id:this.widgetID};if(this.ref)a.ref=this.ref;return URI('/plugins/like_confirm.php').addQueryData(a).toString();},updateLoggedInUser:function(b,a){ExternalNodeConnectWidget.updateLoggedInUser(b,a);},syncSendWidgetWidth:function(h,b){var a=this.computeButtonDimensionsWithPadding().width;var c=b.button_width-a;if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT&&c>0&&c<=5){CSS.setStyle(this.connectButton,'width',(b.button_width-parseInt(CSS.getStyle(this.connectButton,'paddingLeft'))-parseInt(CSS.getStyle(this.connectButton,'paddingRight'))-parseInt(CSS.getStyle(this.connectButton,'borderLeftWidth'))-parseInt(CSS.getStyle(this.connectButton,'borderRightWidth')))+'px');this.sizeNumberCloud();}if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT){var d=Vector2.getElementDimensions(this.widget).y;CSS.setStyle(this.widget,'height',(d+5)+'px');var e=ua.ie();var f=intl_locale_is_rtl();var g=f?'right':'left';if(e&&e<9){CSS.setStyle(this.connectButton,'position','absolute');CSS.setStyle(this.connectButton,g,-(b.button_width+10)+'px');}else{CSS.setStyle(this.connectButton,'position','fixed');CSS.setStyle(this.connectButton,g,'0px');}if(e&&this.connectButtonSlider){CSS.setStyle(this.connectButtonSlider,g,b.button_width+'px');if(e<=7)this.fixIEButtonDoubleLineBug();}CSS.setStyle(this.confirmationCell,'position','absolute');CSS.setStyle(this.confirmationCell,g,(b.button_width+a+5)+'px');CSS.setStyle(this.confirmationCell,'top','5px');if(this.sampleConnections){CSS.setStyle(this.sampleConnections,'position','fixed');CSS.setStyle(this.sampleConnections,g,'0');}this.invertedButtons=true;this.repositionFacepileVertically();}},repositionFacepileVertically:function(){if(this.invertedButtons&&this.sampleConnections){var a=Vector2.getElementDimensions(this.summaryText).y;CSS.setStyle(this.sampleConnections,'margin-top',(5+a+5)+'px');}}});
var ExternalPageLikeWidget=function(a){a.edgeType='like';this.parent.construct(this,a);this.unactionLink=DOM.scry(this.widget,'span.unlike_link')[0];if(this.unactionLink)Event.listen(this.unactionLink,'click',this.connectToNodeOnClick.bind(this));this.hasShowedInsights=false;this.showInsights();};Class.extend(ExternalPageLikeWidget,'ExternalNodeConnectWidget');ExternalPageLikeWidget.LIKE_EDGE_TYPE=0;ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE=1;copy_properties(ExternalPageLikeWidget.prototype,{getSyncEndpointName:function(){var a=this.connectText?this.connectText:'like';if(a==ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE)a='like';return 'platform/'+a+'/sync';},getConnectionEndpointName:function(){return 'platform/like/connection';},getPluginName:function(){return 'like';},presentInsightsPage:function(){window.open('/insights/?sk=po_'+this.pageId,'_blank');},showInsights:function(){if(this.hasShowedInsights||!this.pageId)return;var b=DOM.scry(this.widget,'a.connect_widget_insights_link');if(b)for(var a=0;a<b.length;a++){CSS.show(b[a].parentNode);Event.listen(b[a],'click',this.presentInsightsPage.bind(this));}this.hasShowedInsights=true;},repositionFacepileVertically:function(){this.showInsights();this.parent.repositionFacepileVertically();}});
function SendButton(b){var a=$(b.divID);copy_properties(this,{button:DOM.find(a,'a.btnLink'),channel:b.channel,div:a,divID:b.divID,loggedIn:!!b.userID,nodeImageURL:b.nodeImageURL,nodeTitle:b.nodeTitle,nodeURL:b.nodeURL,nodeSummary:b.nodeSummary,error:b.error,initFormOpen:b.initFormOpen,extended_social_context:b.extended_social_context,likeButtonLayout:b.likeButtonLayout});this.init();}copy_properties(SendButton.prototype,{init:function(){this.formIsOpen=false;this.formIsShown=false;this.pendingFormShow=false;Arbiter.subscribe('platform/socialplugins/send/sent',function(b,a){if(a.controllerID===this.divID)this.closeForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe('platform/socialplugins/send/cancel',function(b,a){if(a.controllerID===this.divID)this.hideForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);this.buttonWidth=Vector2.getElementDimensions(this.button).x;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/like/resize',this.syncLikeWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/send/resize',{button_width:this.buttonWidth},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(b,a){if(a.controllerID!==this.divID&&a.event=='open')this.closeForm();}.bind(this));UnverifiedXD.init({channelUrl:this.channel,autoResize:true,resizeWidth:true});Event.listen(this.button,'click',this.toggleFormVisibility.bind(this));if(this.initFormOpen)onafterloadRegister(this.toggleFormVisibility.bind(this));},syncLikeWidgetWidth:function(d,a){var b=a.button_width-this.buttonWidth;if(a.layout==='box_count'&&b>0&&b<=5)CSS.setStyle(this.div,'width',(a.button_width-parseInt(CSS.getStyle(this.button,'paddingLeft'))-parseInt(CSS.getStyle(this.button,'paddingRight'))-parseInt(CSS.getStyle(this.button,'borderLeftWidth'))-parseInt(CSS.getStyle(this.button,'borderRightWidth')))+'px');if(a.layout==='standard'){var c=intl_locale_is_rtl()?'right':'left';CSS.setStyle(this.div,'position','absolute');CSS.setStyle(this.div,c,(a.button_width+5)+'px');this.invertedButtons=true;}this.likeWidgetWidth=a.widget_width;this.likeButtonWidth=a.button_width;},toggleFormVisibility:function(a){if(!this.loggedIn){a.kill();PlatformOptInPopup.open('send');return;}if(!this.formIsOpen){this.openForm();}else if(this.formIsShown){this.hideForm();}else this.showForm();},hideForm:function(){if(this.formIsShown){this.formIsShown=false;UnverifiedXD.send({type:'hideEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}},showForm:function(){if(!this.formIsShown){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsShown=true;UnverifiedXD.send({type:'showEdgeCommentDialog'});}},closeForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'close'});if(this.formIsOpen){this.formIsOpen=this.formIsShown=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}return this;},openForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'open'});if(!this.formIsOpen){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsOpen=this.formIsShown=true;var a={type:'presentEdgeCommentDialog',nodeImageURL:this.nodeImageURL,nodeTitle:this.nodeTitle,nodeURL:this.nodeURL,nodeSummary:this.nodeSummary,controllerID:this.divID,error:this.error,widget_type:'send',extended_social_context:this.extended_social_context};if(this.likeButtonLayout=='button_count'){a.preComputedWidthOffset=this.likeWidgetWidth?this.likeWidgetWidth+10:91;}else if(this.likeButtonLayout=='box_count'){a.preComputedHeightOffset=65;a.preComputedWidthOffset=this.buttonWidth?this.buttonWidth+7:60;a.siderender=true;}else if(this.likeButtonLayout=='simple'){a.preComputedWidthOffset=100;}else if(this.likeButtonLayout=='standard'&&this.invertedButtons)a.preComputedWidthOffset=this.likeButtonWidth?this.likeButtonWidth+5:69;UnverifiedXD.send(a);}return this;}});