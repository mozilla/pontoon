
{# Widget to display insights. #}
{% macro display(data) %}
<div id="insights" data-dates="{{ data.dates }}">
    <section class="clearfix">
        <section class="half">
            <div class="block clearfix">
                <h3 class="controls">
                    Active users
                    <div class="fa fa-info"></div>
                    <div class="tooltip">
                        <p>Ratios of active vs. all managers, reviewers, contributors.</p>
                        <ul>
                            <li class="active-managers">
                                <b>Active managers:</b>
                                Managers who logged into Pontoon within the selected time frame.
                            </li>
                            <li class="active-reviewers">
                                <b>Active reviewers:</b>
                                Users who reviewed translations within the selected time frame.
                            </li>
                            <li class="active-contributors">
                                <b>Active contributors:</b>
                                Users who submitted translations within the selected time frame.
                            </li>
                        </ul>
                    </div>
                </h3>
                <div id="managers" class="active-users">
                    <div class="wrapper" data-active="{{ data.active_managers }}" data-all="{{ data.total_managers }}">
                        <canvas class="chart" height="110" width="110"></canvas>
                        <div class="active-wrapper">
                            <span class="active noselect"></span>
                        </div>
                        <span class="all noselect"></span>
                    </div>
                    <h3>Active<br/>Managers</h3>
                </div>
                <div id="reviewers" class="active-users">
                    <div class="wrapper" data-active="{{ data.active_reviewers }}" data-all="{{ data.total_reviewers }}">
                        <canvas class="chart" height="110" width="110"></canvas>
                        <div class="active-wrapper">
                            <span class="active noselect"></span>
                        </div>
                        <span class="all noselect"></span>
                    </div>
                    <h3>Active<br/>Reviewers</h3>
                </div>
                <div id="contributors" class="active-users">
                    <div class="wrapper" data-active="{{ data.active_contributors }}" data-all="{{ data.total_contributors }}">
                        <canvas class="chart" height="110" width="110"></canvas>
                        <div class="active-wrapper">
                            <span class="active noselect"></span>
                        </div>
                        <span class="all noselect"></span>
                    </div>
                    <h3>Active<br/>Contributors</h3>
                </div>
            </div>
        </section>
        <section class="half">
            <div class="block clearfix">
                <h3 class="controls">
                    Unreviewed suggestions lifespan
                    <div class="fa fa-info"></div>
                    <div class="tooltip">
                        How much time it takes on average to review a suggestion within the selected time frame.
                    </div>
                </h3>
                <div
                    id="unreviewed-lifespan-container"
                    data-lifespans="{{ data.unreviewed_lifespans }}">
                </div>
            </div>
        </section>
    </section>

    <section class="translation-activity">
        <figure class="block highcharts-figure">
            <h3 class="controls">
                Translation activity
                <div class="fa fa-info"></div>
                <div class="tooltip">
                    <p>Impact of adding translations and source strings on the overal translation completion.</p>
                    <ul>
                        <li class="completion">
                            <b>Completion:</b>
                            Share of translated strings.
                        </li>
                        <li class="human-translations">
                            <b>Human translations:</b>
                            Translations authored by users.
                        </li>
                        <li class="machinery-translations">
                            <b>Machinery translations:</b>
                            Translations copied from Machinery.
                        </li>
                        <li class="new-source-strings">
                            <b>New source strings:</b>
                            Newly added source strings (hidden by default).
                        </li>
                    </ul>
                </div>
            </h3>
            <div
                id="translation-activity-container"
                data-completion="{{ data.translation_activity.completion }}"
                data-human-translations="{{ data.translation_activity.human_translations }}"
                data-machinery-translations="{{ data.translation_activity.machinery_translations }}"
                data-new-source-strings="{{ data.translation_activity.new_source_strings }}">
            </div>
        </figure>
    </section>

    <section class="review-activity">
        <figure class="block highcharts-figure">
            <h3 class="controls">
                Review activity
                <div class="fa fa-info"></div>
                <div class="tooltip">
                    <p>Impact of the review process and adding suggestions on the overal amount of unreviewed suggestions.</p>
                    <ul>
                        <li class="unreviewed">
                            <b>Unreviewed:</b>
                            Suggestions pending a review.
                        </li>
                        <li class="peer-approved">
                            <b>Peer-approved:</b>
                            Suggestions approved by peers of the author.
                        </li>
                        <li class="self-approved">
                            <b>Self-approved:</b>
                            Directly submitted translations.
                        </li>
                        <li class="rejected">
                            <b>Rejected:</b>
                            Rejected suggestions.
                        </li>
                        <li class="new">
                            <b>New suggestions:</b>
                            Newly added suggestions (hidden by default).
                        </li>
                    </ul>
                </div>
            </h3>
            <div
                id="review-activity-container"
                data-unreviewed="{{ data.review_activity.unreviewed }}"
                data-peer-approved="{{ data.review_activity.peer_approved }}"
                data-self-approved="{{ data.review_activity.self_approved }}"
                data-rejected="{{ data.review_activity.rejected }}"
                data-new-suggestions="{{ data.review_activity.new_suggestions }}">
            </div>
        </figure>
    </section>
</div>
{% endmacro %}
