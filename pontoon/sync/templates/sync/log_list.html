{% extends "base.html" %}
{% import 'heading.html' as Heading %}

{% block title %}Sync Logs{% endblock %}

{% block heading %}
  {{ Heading.heading(title='Sync Logs') }}
{% endblock %}

{% block bottom %}
<section id="main">
  <div class="container">
    <table class="log-list">
      <tr>
        <th width="40%">Project</th>
        <th width="20%">Last Status</th>
        <th width="20%">Last Start</th>
        <th width="20%">Duration</th>
      </tr>
      {% for project in projects %}
        <tr class="sync-log">
          <td>
            {% if is_manager %}
              <a href="{{ project.sync_url }}">{{ project.name }}</a>
            {% else %}
              {{ project.name }}
            {% endif %}
          </td>
          <td class="{{ format_sync_status_class(project.sync_status) }}">
            {{ format_sync_status_label(project.sync_status) }}
          </td>
          <td>
            {{ project.sync_start_time|date("Y-m-d H:i") }}
          </td>
          <td title="End: {{ project.sync_end_time|date('Y-m-d H:i:s') }}">
            {{ format_sync_duration(project.sync_start_time, project.sync_end_time) }}
          </td>
        </tr>
      {% endfor %}
    </table>

    <div class="controls">
      {% if show_no_changes %}
        <a class="button" href="?no_changes=0">Hide syncs with no changes</a>
      {% else %}
        <a class="button" href="?no_changes=1">Show syncs with no changes</a>
      {% endif %}
    </div>
  </div>
</section>
{% endblock %}

{% block extend_css %}
  {% stylesheet 'sync_logs' %}
{% endblock %}
